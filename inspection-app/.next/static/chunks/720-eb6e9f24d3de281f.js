"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[720],{9582:(e,t,r)=>{r.d(t,{p8:()=>ew});var i,n,a,s,o,l,h,c=r(9244),p={},u=180/Math.PI,d=Math.PI/180,f=Math.atan2,m=/([A-Z])/g,g=/(left|right|width|margin|padding|x)/i,y=/[\s,\(]\S/,v={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},_=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},w=function(e,t){return t.set(t.t,t.p,1===e?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},b=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},x=function(e,t){var r=t.s+t.c*e;t.set(t.t,t.p,~~(r+(r<0?-.5:.5))+t.u,t)},P=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},T=function(e,t){return t.set(t.t,t.p,1!==e?t.b:t.e,t)},M=function(e,t,r){return e.style[t]=r},E=function(e,t,r){return e.style.setProperty(t,r)},I=function(e,t,r){return e._gsap[t]=r},O=function(e,t,r){return e._gsap.scaleX=e._gsap.scaleY=r},D=function(e,t,r,i,n){var a=e._gsap;a.scaleX=a.scaleY=r,a.renderTransform(n,a)},S=function(e,t,r,i,n){var a=e._gsap;a[t]=r,a.renderTransform(n,a)},A="transform",k=A+"Origin",N=function e(t,r){var i=this,n=this.target,a=n.style,s=n._gsap;if(t in p&&a){if(this.tfm=this.tfm||{},"transform"===t)return v.transform.split(",").forEach(function(t){return e.call(i,t,r)});if(~(t=v[t]||t).indexOf(",")?t.split(",").forEach(function(e){return i.tfm[e]=q(n,e)}):this.tfm[t]=s.x?s[t]:q(n,t),t===k&&(this.tfm.zOrigin=s.zOrigin),this.props.indexOf(A)>=0)return;s.svg&&(this.svgo=n.getAttribute("data-svg-origin"),this.props.push(k,r,"")),t=A}(a||r)&&this.props.push(t,r,a[t])},C=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},R=function(){var e,t,r=this.props,i=this.target,n=i.style,a=i._gsap;for(e=0;e<r.length;e+=3)r[e+1]?2===r[e+1]?i[r[e]](r[e+2]):i[r[e]]=r[e+2]:r[e+2]?n[r[e]]=r[e+2]:n.removeProperty("--"===r[e].substr(0,2)?r[e]:r[e].replace(m,"-$1").toLowerCase());if(this.tfm){for(t in this.tfm)a[t]=this.tfm[t];a.svg&&(a.renderTransform(),i.setAttribute("data-svg-origin",this.svgo||"")),(e=l())&&e.isStart||n[A]||(C(n),a.zOrigin&&n[k]&&(n[k]+=" "+a.zOrigin+"px",a.zOrigin=0,a.renderTransform()),a.uncache=1)}},L=function(e,t){var r={target:e,props:[],revert:R,save:N};return e._gsap||c.p8.core.getCache(e),t&&e.style&&e.nodeType&&t.split(",").forEach(function(e){return r.save(e)}),r},F=function(e,t){var r=i.createElementNS?i.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):i.createElement(e);return r&&r.style?r:i.createElement(e)},j=function e(t,r,i){var n=getComputedStyle(t);return n[r]||n.getPropertyValue(r.replace(m,"-$1").toLowerCase())||n.getPropertyValue(r)||!i&&e(t,z(r)||r,1)||""},U="O,Moz,ms,Ms,Webkit".split(","),z=function(e,t,r){var i=(t||s).style,n=5;if(e in i&&!r)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);n--&&!(U[n]+e in i););return n<0?null:(3===n?"ms":n>=0?U[n]:"")+e},B=function(){"undefined"!=typeof window&&window.document&&(n=(i=window.document).documentElement,s=F("div")||{style:{}},F("div"),k=(A=z(A))+"Origin",s.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",h=!!z("perspective"),l=c.p8.core.reverting,a=1)},X=function(e){var t,r=e.ownerSVGElement,i=F("svg",r&&r.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),a=e.cloneNode(!0);a.style.display="block",i.appendChild(a),n.appendChild(i);try{t=a.getBBox()}catch(e){}return i.removeChild(a),n.removeChild(i),t},Y=function(e,t){for(var r=t.length;r--;)if(e.hasAttribute(t[r]))return e.getAttribute(t[r])},V=function(e){var t,r;try{t=e.getBBox()}catch(i){t=X(e),r=1}return t&&(t.width||t.height)||r||(t=X(e)),!t||t.width||t.x||t.y?t:{x:+Y(e,["x","cx","x1"])||0,y:+Y(e,["y","cy","y1"])||0,width:0,height:0}},G=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&V(e))},W=function(e,t){if(t){var r,i=e.style;t in p&&t!==k&&(t=A),i.removeProperty?(("ms"===(r=t.substr(0,2))||"webkit"===t.substr(0,6))&&(t="-"+t),i.removeProperty("--"===r?t:t.replace(m,"-$1").toLowerCase())):i.removeAttribute(t)}},H=function(e,t,r,i,n,a){var s=new c.Fo(e._pt,t,r,0,1,a?T:P);return e._pt=s,s.b=i,s.e=n,e._props.push(r),s},K={deg:1,rad:1,turn:1},Z={grid:1,flex:1},$=function e(t,r,n,a){var o,l,h,u,d=parseFloat(n)||0,f=(n+"").trim().substr((d+"").length)||"px",m=s.style,y=g.test(r),v="svg"===t.tagName.toLowerCase(),_=(v?"client":"offset")+(y?"Width":"Height"),w="px"===a,b="%"===a;if(a===f||!d||K[a]||K[f])return d;if("px"===f||w||(d=e(t,r,n,"px")),u=t.getCTM&&G(t),(b||"%"===f)&&(p[r]||~r.indexOf("adius")))return o=u?t.getBBox()[y?"width":"height"]:t[_],(0,c.Pr)(b?d/o*100:d/100*o);if(m[y?"width":"height"]=100+(w?f:a),l="rem"!==a&&~r.indexOf("adius")||"em"===a&&t.appendChild&&!v?t:t.parentNode,u&&(l=(t.ownerSVGElement||{}).parentNode),l&&l!==i&&l.appendChild||(l=i.body),(h=l._gsap)&&b&&h.width&&y&&h.time===c.xr.time&&!h.uncache)return(0,c.Pr)(d/h.width*100);if(b&&("height"===r||"width"===r)){var x=t.style[r];t.style[r]=100+a,o=t[_],x?t.style[r]=x:W(t,r)}else(b||"%"===f)&&!Z[j(l,"display")]&&(m.position=j(t,"position")),l===t&&(m.position="static"),l.appendChild(s),o=s[_],l.removeChild(s),m.position="absolute";return y&&b&&((h=(0,c.DY)(l)).time=c.xr.time,h.width=l[_]),(0,c.Pr)(w?o*d/100:o&&d?100/o*d:0)},q=function(e,t,r,i){var n;return a||B(),t in v&&"transform"!==t&&~(t=v[t]).indexOf(",")&&(t=t.split(",")[0]),p[t]&&"transform"!==t?(n=eh(e,i),n="transformOrigin"!==t?n[t]:n.svg?n.origin:ec(j(e,k))+" "+n.zOrigin+"px"):(!(n=e.style[t])||"auto"===n||i||~(n+"").indexOf("calc("))&&(n=er[t]&&er[t](e,t,r)||j(e,t)||(0,c.Ok)(e,t)||("opacity"===t?1:0)),r&&!~(n+"").trim().indexOf(" ")?$(e,t,n,r)+r:n},Q=function(e,t,r,i){if(!r||"none"===r){var n=z(t,e,1),a=n&&j(e,n,1);a&&a!==r?(t=n,r=a):"borderColor"===t&&(r=j(e,"borderTopColor"))}var s,o,l,h,p,u,d,f,m,g,y,v=new c.Fo(this._pt,e.style,t,0,1,c.Ks),_=0,w=0;if(v.b=r,v.e=i,r+="","auto"==(i+="")&&(u=e.style[t],e.style[t]=i,i=j(e,t)||i,u?e.style[t]=u:W(e,t)),s=[r,i],(0,c.kr)(s),r=s[0],i=s[1],l=r.match(c.d4)||[],(i.match(c.d4)||[]).length){for(;o=c.d4.exec(i);)d=o[0],m=i.substring(_,o.index),p?p=(p+1)%5:("rgba("===m.substr(-5)||"hsla("===m.substr(-5))&&(p=1),d!==(u=l[w++]||"")&&(h=parseFloat(u)||0,y=u.substr((h+"").length),"="===d.charAt(1)&&(d=(0,c.cy)(h,d)+y),f=parseFloat(d),g=d.substr((f+"").length),_=c.d4.lastIndex-g.length,g||(g=g||c.Fc.units[t]||y,_!==i.length||(i+=g,v.e+=g)),y!==g&&(h=$(e,t,u,g)||0),v._pt={_next:v._pt,p:m||1===w?m:",",s:h,c:f-h,m:p&&p<4||"zIndex"===t?Math.round:0});v.c=_<i.length?i.substring(_,i.length):""}else v.r="display"===t&&"none"===i?T:P;return c.bQ.test(i)&&(v.e=0),this._pt=v,v},J={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},ee=function(e){var t=e.split(" "),r=t[0],i=t[1]||"50%";return("top"===r||"bottom"===r||"left"===i||"right"===i)&&(e=r,r=i,i=e),t[0]=J[r]||r,t[1]=J[i]||i,t.join(" ")},et=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var r,i,n,a=t.t,s=a.style,o=t.u,l=a._gsap;if("all"===o||!0===o)s.cssText="",i=1;else for(n=(o=o.split(",")).length;--n>-1;)p[r=o[n]]&&(i=1,r="transformOrigin"===r?k:A),W(a,r);i&&(W(a,A),l&&(l.svg&&a.removeAttribute("transform"),s.scale=s.rotate=s.translate="none",eh(a,1),l.uncache=1,C(s)))}},er={clearProps:function(e,t,r,i,n){if("isFromStart"!==n.data){var a=e._pt=new c.Fo(e._pt,t,r,0,0,et);return a.u=i,a.pr=-10,a.tween=n,e._props.push(r),1}}},ei=[1,0,0,1,0,0],en={},ea=function(e){return"matrix(1, 0, 0, 1, 0, 0)"===e||"none"===e||!e},es=function(e){var t=j(e,A);return ea(t)?ei:t.substr(7).match(c.SI).map(c.Pr)},eo=function(e,t){var r,i,a,s,o=e._gsap||(0,c.DY)(e),l=e.style,h=es(e);return o.svg&&e.getAttribute("transform")?"1,0,0,1,0,0"===(h=[(a=e.transform.baseVal.consolidate().matrix).a,a.b,a.c,a.d,a.e,a.f]).join(",")?ei:h:(h!==ei||e.offsetParent||e===n||o.svg||(a=l.display,l.display="block",(r=e.parentNode)&&(e.offsetParent||e.getBoundingClientRect().width)||(s=1,i=e.nextElementSibling,n.appendChild(e)),h=es(e),a?l.display=a:W(e,"display"),s&&(i?r.insertBefore(e,i):r?r.appendChild(e):n.removeChild(e))),t&&h.length>6?[h[0],h[1],h[4],h[5],h[12],h[13]]:h)},el=function(e,t,r,i,n,a){var s,o,l,h,c=e._gsap,p=n||eo(e,!0),u=c.xOrigin||0,d=c.yOrigin||0,f=c.xOffset||0,m=c.yOffset||0,g=p[0],y=p[1],v=p[2],_=p[3],w=p[4],b=p[5],x=t.split(" "),P=parseFloat(x[0])||0,T=parseFloat(x[1])||0;r?p!==ei&&(o=g*_-y*v)&&(l=_/o*P+-v/o*T+(v*b-_*w)/o,h=-y/o*P+g/o*T-(g*b-y*w)/o,P=l,T=h):(P=(s=V(e)).x+(~x[0].indexOf("%")?P/100*s.width:P),T=s.y+(~(x[1]||x[0]).indexOf("%")?T/100*s.height:T)),i||!1!==i&&c.smooth?(w=P-u,b=T-d,c.xOffset=f+(w*g+b*v)-w,c.yOffset=m+(w*y+b*_)-b):c.xOffset=c.yOffset=0,c.xOrigin=P,c.yOrigin=T,c.smooth=!!i,c.origin=t,c.originIsAbsolute=!!r,e.style[k]="0px 0px",a&&(H(a,c,"xOrigin",u,P),H(a,c,"yOrigin",d,T),H(a,c,"xOffset",f,c.xOffset),H(a,c,"yOffset",m,c.yOffset)),e.setAttribute("data-svg-origin",P+" "+T)},eh=function(e,t){var r=e._gsap||new c.l1(e);if("x"in r&&!t&&!r.uncache)return r;var i,n,a,s,o,l,p,m,g,y,v,_,w,b,x,P,T,M,E,I,O,D,S,N,C,R,L,F,U,z,B,X,Y=e.style,V=r.scaleX<0,W=getComputedStyle(e),H=j(e,k)||"0";return i=n=a=l=p=m=g=y=v=0,s=o=1,r.svg=!!(e.getCTM&&G(e)),W.translate&&(("none"!==W.translate||"none"!==W.scale||"none"!==W.rotate)&&(Y[A]=("none"!==W.translate?"translate3d("+(W.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==W.rotate?"rotate("+W.rotate+") ":"")+("none"!==W.scale?"scale("+W.scale.split(" ").join(",")+") ":"")+("none"!==W[A]?W[A]:"")),Y.scale=Y.rotate=Y.translate="none"),b=eo(e,r.svg),r.svg&&(r.uncache?(C=e.getBBox(),H=r.xOrigin-C.x+"px "+(r.yOrigin-C.y)+"px",N=""):N=!t&&e.getAttribute("data-svg-origin"),el(e,N||H,!!N||r.originIsAbsolute,!1!==r.smooth,b)),_=r.xOrigin||0,w=r.yOrigin||0,b!==ei&&(M=b[0],E=b[1],I=b[2],O=b[3],i=D=b[4],n=S=b[5],6===b.length?(s=Math.sqrt(M*M+E*E),o=Math.sqrt(O*O+I*I),l=M||E?f(E,M)*u:0,(g=I||O?f(I,O)*u+l:0)&&(o*=Math.abs(Math.cos(g*d))),r.svg&&(i-=_-(_*M+w*I),n-=w-(_*E+w*O))):(X=b[6],z=b[7],L=b[8],F=b[9],U=b[10],B=b[11],i=b[12],n=b[13],a=b[14],p=(x=f(X,U))*u,x&&(N=D*(P=Math.cos(-x))+L*(T=Math.sin(-x)),C=S*P+F*T,R=X*P+U*T,L=-(D*T)+L*P,F=-(S*T)+F*P,U=-(X*T)+U*P,B=-(z*T)+B*P,D=N,S=C,X=R),m=(x=f(-I,U))*u,x&&(N=M*(P=Math.cos(-x))-L*(T=Math.sin(-x)),C=E*P-F*T,R=I*P-U*T,B=O*T+B*P,M=N,E=C,I=R),l=(x=f(E,M))*u,x&&(N=M*(P=Math.cos(x))+E*(T=Math.sin(x)),C=D*P+S*T,E=E*P-M*T,S=S*P-D*T,M=N,D=C),p&&Math.abs(p)+Math.abs(l)>359.9&&(p=l=0,m=180-m),s=(0,c.Pr)(Math.sqrt(M*M+E*E+I*I)),o=(0,c.Pr)(Math.sqrt(S*S+X*X)),g=Math.abs(x=f(D,S))>2e-4?x*u:0,v=B?1/(B<0?-B:B):0),r.svg&&(N=e.getAttribute("transform"),r.forceCSS=e.setAttribute("transform","")||!ea(j(e,A)),N&&e.setAttribute("transform",N))),Math.abs(g)>90&&270>Math.abs(g)&&(V?(s*=-1,g+=l<=0?180:-180,l+=l<=0?180:-180):(o*=-1,g+=g<=0?180:-180)),t=t||r.uncache,r.x=i-((r.xPercent=i&&(!t&&r.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-i)?-50:0)))?e.offsetWidth*r.xPercent/100:0)+"px",r.y=n-((r.yPercent=n&&(!t&&r.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-n)?-50:0)))?e.offsetHeight*r.yPercent/100:0)+"px",r.z=a+"px",r.scaleX=(0,c.Pr)(s),r.scaleY=(0,c.Pr)(o),r.rotation=(0,c.Pr)(l)+"deg",r.rotationX=(0,c.Pr)(p)+"deg",r.rotationY=(0,c.Pr)(m)+"deg",r.skewX=g+"deg",r.skewY=y+"deg",r.transformPerspective=v+"px",(r.zOrigin=parseFloat(H.split(" ")[2])||!t&&r.zOrigin||0)&&(Y[k]=ec(H)),r.xOffset=r.yOffset=0,r.force3D=c.Fc.force3D,r.renderTransform=r.svg?em:h?ef:eu,r.uncache=0,r},ec=function(e){return(e=e.split(" "))[0]+" "+e[1]},ep=function(e,t,r){var i=(0,c.Wy)(t);return(0,c.Pr)(parseFloat(t)+parseFloat($(e,"x",r+"px",i)))+i},eu=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,ef(e,t)},ed="0deg",ef=function(e,t){var r=t||this,i=r.xPercent,n=r.yPercent,a=r.x,s=r.y,o=r.z,l=r.rotation,h=r.rotationY,c=r.rotationX,p=r.skewX,u=r.skewY,f=r.scaleX,m=r.scaleY,g=r.transformPerspective,y=r.force3D,v=r.target,_=r.zOrigin,w="",b="auto"===y&&e&&1!==e||!0===y;if(_&&(c!==ed||h!==ed)){var x,P=parseFloat(h)*d,T=Math.sin(P),M=Math.cos(P);a=ep(v,a,-(T*(x=Math.cos(P=parseFloat(c)*d))*_)),s=ep(v,s,-(-Math.sin(P)*_)),o=ep(v,o,-(M*x*_)+_)}"0px"!==g&&(w+="perspective("+g+") "),(i||n)&&(w+="translate("+i+"%, "+n+"%) "),(b||"0px"!==a||"0px"!==s||"0px"!==o)&&(w+="0px"!==o||b?"translate3d("+a+", "+s+", "+o+") ":"translate("+a+", "+s+") "),l!==ed&&(w+="rotate("+l+") "),h!==ed&&(w+="rotateY("+h+") "),c!==ed&&(w+="rotateX("+c+") "),(p!==ed||u!==ed)&&(w+="skew("+p+", "+u+") "),(1!==f||1!==m)&&(w+="scale("+f+", "+m+") "),v.style[A]=w||"translate(0, 0)"},em=function(e,t){var r,i,n,a,s,o=t||this,l=o.xPercent,h=o.yPercent,p=o.x,u=o.y,f=o.rotation,m=o.skewX,g=o.skewY,y=o.scaleX,v=o.scaleY,_=o.target,w=o.xOrigin,b=o.yOrigin,x=o.xOffset,P=o.yOffset,T=o.forceCSS,M=parseFloat(p),E=parseFloat(u);f=parseFloat(f),m=parseFloat(m),(g=parseFloat(g))&&(m+=g=parseFloat(g),f+=g),f||m?(f*=d,m*=d,r=Math.cos(f)*y,i=Math.sin(f)*y,n=-(Math.sin(f-m)*v),a=Math.cos(f-m)*v,m&&(g*=d,n*=s=Math.sqrt(1+(s=Math.tan(m-g))*s),a*=s,g&&(r*=s=Math.sqrt(1+(s=Math.tan(g))*s),i*=s)),r=(0,c.Pr)(r),i=(0,c.Pr)(i),n=(0,c.Pr)(n),a=(0,c.Pr)(a)):(r=y,a=v,i=n=0),(M&&!~(p+"").indexOf("px")||E&&!~(u+"").indexOf("px"))&&(M=$(_,"x",p,"px"),E=$(_,"y",u,"px")),(w||b||x||P)&&(M=(0,c.Pr)(M+w-(w*r+b*n)+x),E=(0,c.Pr)(E+b-(w*i+b*a)+P)),(l||h)&&(s=_.getBBox(),M=(0,c.Pr)(M+l/100*s.width),E=(0,c.Pr)(E+h/100*s.height)),s="matrix("+r+","+i+","+n+","+a+","+M+","+E+")",_.setAttribute("transform",s),T&&(_.style[A]=s)},eg=function(e,t,r,i,n){var a,s,o=(0,c.r9)(n),l=parseFloat(n)*(o&&~n.indexOf("rad")?u:1)-i,h=i+l+"deg";return o&&("short"===(a=n.split("_")[1])&&(l%=360)!=l%180&&(l+=l<0?360:-360),"cw"===a&&l<0?l=(l+36e9)%360-360*~~(l/360):"ccw"===a&&l>0&&(l=(l-36e9)%360-360*~~(l/360))),e._pt=s=new c.Fo(e._pt,t,r,i,l,w),s.e=h,s.u="deg",e._props.push(r),s},ey=function(e,t){for(var r in t)e[r]=t[r];return e},ev=function(e,t,r){var i,n,a,s,o,l,h,u=ey({},r._gsap),d=r.style;for(n in u.svg?(a=r.getAttribute("transform"),r.setAttribute("transform",""),d[A]=t,i=eh(r,1),W(r,A),r.setAttribute("transform",a)):(a=getComputedStyle(r)[A],d[A]=t,i=eh(r,1),d[A]=a),p)(a=u[n])!==(s=i[n])&&0>"perspective,force3D,transformOrigin,svgOrigin".indexOf(n)&&(o=(0,c.Wy)(a)!==(h=(0,c.Wy)(s))?$(r,n,a,h):parseFloat(a),l=parseFloat(s),e._pt=new c.Fo(e._pt,i,n,o,l-o,_),e._pt.u=h||0,e._props.push(n));ey(i,u)};(0,c.fS)("padding,margin,Width,Radius",function(e,t){var r="Right",i="Bottom",n="Left",a=(t<3?["Top",r,i,n]:["Top"+n,"Top"+r,i+r,i+n]).map(function(r){return t<2?e+r:"border"+r+e});er[t>1?"border"+e:e]=function(e,t,r,i,n){var s,o;if(arguments.length<4)return 5===(o=(s=a.map(function(t){return q(e,t,r)})).join(" ")).split(s[0]).length?s[0]:o;s=(i+"").split(" "),o={},a.forEach(function(e,t){return o[e]=s[t]=s[t]||s[(t-1)/2|0]}),e.init(t,o,n)}});var e_={name:"css",register:B,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,r,i,n){var s,o,l,h,u,d,f,m,g,w,P,T,M,E,I,O,D=this._props,S=e.style,N=r.vars.startAt;for(f in a||B(),this.styles=this.styles||L(e),O=this.styles.props,this.tween=r,t)if("autoRound"!==f&&(o=t[f],!(c.$i[f]&&(0,c.if)(f,t,r,i,e,n)))){if(u=typeof o,d=er[f],"function"===u&&(u=typeof(o=o.call(r,i,e,n))),"string"===u&&~o.indexOf("random(")&&(o=(0,c.UI)(o)),d)d(this,e,f,o,r)&&(I=1);else if("--"===f.substr(0,2))s=(getComputedStyle(e).getPropertyValue(f)+"").trim(),o+="",c.GN.lastIndex=0,c.GN.test(s)||(m=(0,c.Wy)(s),g=(0,c.Wy)(o)),g?m!==g&&(s=$(e,f,s,g)+g):m&&(o+=m),this.add(S,"setProperty",s,o,i,n,0,0,f),D.push(f),O.push(f,0,S[f]);else if("undefined"!==u){if(N&&f in N?(s="function"==typeof N[f]?N[f].call(r,i,e,n):N[f],(0,c.r9)(s)&&~s.indexOf("random(")&&(s=(0,c.UI)(s)),(0,c.Wy)(s+"")||"auto"===s||(s+=c.Fc.units[f]||(0,c.Wy)(q(e,f))||""),"="===(s+"").charAt(1)&&(s=q(e,f))):s=q(e,f),h=parseFloat(s),(w="string"===u&&"="===o.charAt(1)&&o.substr(0,2))&&(o=o.substr(2)),l=parseFloat(o),f in v&&("autoAlpha"===f&&(1===h&&"hidden"===q(e,"visibility")&&l&&(h=0),O.push("visibility",0,S.visibility),H(this,S,"visibility",h?"inherit":"hidden",l?"inherit":"hidden",!l)),"scale"!==f&&"transform"!==f&&~(f=v[f]).indexOf(",")&&(f=f.split(",")[0])),P=f in p){if(this.styles.save(f),T||((M=e._gsap).renderTransform&&!t.parseTransform||eh(e,t.parseTransform),E=!1!==t.smoothOrigin&&M.smooth,(T=this._pt=new c.Fo(this._pt,S,A,0,1,M.renderTransform,M,0,-1)).dep=1),"scale"===f)this._pt=new c.Fo(this._pt,M,"scaleY",M.scaleY,(w?(0,c.cy)(M.scaleY,w+l):l)-M.scaleY||0,_),this._pt.u=0,D.push("scaleY",f),f+="X";else if("transformOrigin"===f){O.push(k,0,S[k]),o=ee(o),M.svg?el(e,o,0,E,0,this):((g=parseFloat(o.split(" ")[2])||0)!==M.zOrigin&&H(this,M,"zOrigin",M.zOrigin,g),H(this,S,f,ec(s),ec(o)));continue}else if("svgOrigin"===f){el(e,o,1,E,0,this);continue}else if(f in en){eg(this,M,f,h,w?(0,c.cy)(h,w+o):o);continue}else if("smoothOrigin"===f){H(this,M,"smooth",M.smooth,o);continue}else if("force3D"===f){M[f]=o;continue}else if("transform"===f){ev(this,o,e);continue}}else f in S||(f=z(f)||f);if(P||(l||0===l)&&(h||0===h)&&!y.test(o)&&f in S)m=(s+"").substr((h+"").length),l||(l=0),g=(0,c.Wy)(o)||(f in c.Fc.units?c.Fc.units[f]:m),m!==g&&(h=$(e,f,s,g)),this._pt=new c.Fo(this._pt,P?M:S,f,h,(w?(0,c.cy)(h,w+l):l)-h,P||"px"!==g&&"zIndex"!==f||!1===t.autoRound?_:x),this._pt.u=g||0,m!==g&&"%"!==g&&(this._pt.b=s,this._pt.r=b);else if(f in S)Q.call(this,e,f,s,w?w+o:o);else if(f in e)this.add(e,f,s||e[f],w?w+o:o,i,n);else if("parseTransform"!==f){(0,c.lC)(f,o);continue}P||(f in S?O.push(f,0,S[f]):"function"==typeof e[f]?O.push(f,2,e[f]()):O.push(f,1,s||e[f])),D.push(f)}}I&&(0,c.JV)(this)},render:function(e,t){if(t.tween._time||!l())for(var r=t._pt;r;)r.r(e,r.d),r=r._next;else t.styles.revert()},get:q,aliases:v,getSetter:function(e,t,r){var i=v[t];return i&&0>i.indexOf(",")&&(t=i),t in p&&t!==k&&(e._gsap.x||q(e,"x"))?r&&o===r?"scale"===t?O:I:(o=r||{},"scale"===t?D:S):e.style&&!(0,c.m2)(e.style[t])?M:~t.indexOf("-")?E:(0,c.S5)(e,t)},core:{_removeProperty:W,_getMatrix:eo}};c.p8.utils.checkPrefix=z,c.p8.core.getStyleSaver=L,function(e,t,r,i){var n=(0,c.fS)(e+","+t+","+r,function(e){p[e]=1});(0,c.fS)(t,function(e){c.Fc.units[e]="deg",en[e]=1}),v[n[13]]=e+","+t,(0,c.fS)(i,function(e){var t=e.split(":");v[t[1]]=n[t[0]]})}("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY"),(0,c.fS)("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(e){c.Fc.units[e]="px"}),c.p8.registerPlugin(e_);var ew=c.p8.registerPlugin(e_)||c.p8;ew.core.Tween},6463:(e,t,r)=>{var i=r(1169);r.o(i,"useParams")&&r.d(t,{useParams:function(){return i.useParams}}),r.o(i,"useRouter")&&r.d(t,{useRouter:function(){return i.useRouter}})},8938:(e,t,r)=>{r.d(t,{z:()=>d});var i=r(7776);let n={type:"change"},a={type:"start"},s={type:"end"},o=new i.zHn,l=new i.JOQ,h=Math.cos(70*i.M8C.DEG2RAD),c=new i.Pa4,p=2*Math.PI,u={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};class d extends i.ZXd{constructor(e,t=null){super(e,t),this.state=u.NONE,this.enabled=!0,this.target=new i.Pa4,this.cursor=new i.Pa4,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:i.RsA.ROTATE,MIDDLE:i.RsA.DOLLY,RIGHT:i.RsA.PAN},this.touches={ONE:i.QmN.ROTATE,TWO:i.QmN.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new i.Pa4,this._lastQuaternion=new i._fP,this._lastTargetPosition=new i.Pa4,this._quat=new i._fP().setFromUnitVectors(e.up,new i.Pa4(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new i.$V,this._sphericalDelta=new i.$V,this._scale=1,this._panOffset=new i.Pa4,this._rotateStart=new i.FM8,this._rotateEnd=new i.FM8,this._rotateDelta=new i.FM8,this._panStart=new i.FM8,this._panEnd=new i.FM8,this._panDelta=new i.FM8,this._dollyStart=new i.FM8,this._dollyEnd=new i.FM8,this._dollyDelta=new i.FM8,this._dollyDirection=new i.Pa4,this._mouse=new i.FM8,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=m.bind(this),this._onPointerDown=f.bind(this),this._onPointerUp=g.bind(this),this._onContextMenu=P.bind(this),this._onMouseWheel=_.bind(this),this._onKeyDown=w.bind(this),this._onTouchStart=b.bind(this),this._onTouchMove=x.bind(this),this._onMouseDown=y.bind(this),this._onMouseMove=v.bind(this),this._interceptControlDown=T.bind(this),this._interceptControlUp=M.bind(this),null!==this.domElement&&this.connect(),this.update()}connect(){this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=e}stopListenToKeyEvents(){null!==this._domElementKeyEvents&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(n),this.update(),this.state=u.NONE}update(e=null){let t=this.object.position;c.copy(t).sub(this.target),c.applyQuaternion(this._quat),this._spherical.setFromVector3(c),this.autoRotate&&this.state===u.NONE&&this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let r=this.minAzimuthAngle,a=this.maxAzimuthAngle;isFinite(r)&&isFinite(a)&&(r<-Math.PI?r+=p:r>Math.PI&&(r-=p),a<-Math.PI?a+=p:a>Math.PI&&(a-=p),r<=a?this._spherical.theta=Math.max(r,Math.min(a,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(r+a)/2?Math.max(r,this._spherical.theta):Math.min(a,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),!0===this.enableDamping?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let s=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{let e=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),s=e!=this._spherical.radius}if(c.setFromSpherical(this._spherical),c.applyQuaternion(this._quatInverse),t.copy(this.target).add(c),this.object.lookAt(this.target),!0===this.enableDamping?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let e=null;if(this.object.isPerspectiveCamera){let t=c.length();e=this._clampDistance(t*this._scale);let r=t-e;this.object.position.addScaledVector(this._dollyDirection,r),this.object.updateMatrixWorld(),s=!!r}else if(this.object.isOrthographicCamera){let t=new i.Pa4(this._mouse.x,this._mouse.y,0);t.unproject(this.object);let r=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),s=r!==this.object.zoom;let n=new i.Pa4(this._mouse.x,this._mouse.y,0);n.unproject(this.object),this.object.position.sub(n).add(t),this.object.updateMatrixWorld(),e=c.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;null!==e&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(e).add(this.object.position):(o.origin.copy(this.object.position),o.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(o.direction))<h?this.object.lookAt(this.target):(l.setFromNormalAndCoplanarPoint(this.object.up,this.target),o.intersectPlane(l,this.target))))}else if(this.object.isOrthographicCamera){let e=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),e!==this.object.zoom&&(this.object.updateProjectionMatrix(),s=!0)}return this._scale=1,this._performCursorZoom=!1,!!(s||this._lastPosition.distanceToSquared(this.object.position)>1e-6||8*(1-this._lastQuaternion.dot(this.object.quaternion))>1e-6||this._lastTargetPosition.distanceToSquared(this.target)>1e-6)&&(this.dispatchEvent(n),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0)}_getAutoRotationAngle(e){return null!==e?p/60*this.autoRotateSpeed*e:p/60/60*this.autoRotateSpeed}_getZoomScale(e){let t=Math.abs(.01*e);return Math.pow(.95,this.zoomSpeed*t)}_rotateLeft(e){this._sphericalDelta.theta-=e}_rotateUp(e){this._sphericalDelta.phi-=e}_panLeft(e,t){c.setFromMatrixColumn(t,0),c.multiplyScalar(-e),this._panOffset.add(c)}_panUp(e,t){!0===this.screenSpacePanning?c.setFromMatrixColumn(t,1):(c.setFromMatrixColumn(t,0),c.crossVectors(this.object.up,c)),c.multiplyScalar(e),this._panOffset.add(c)}_pan(e,t){let r=this.domElement;if(this.object.isPerspectiveCamera){let i=this.object.position;c.copy(i).sub(this.target);let n=c.length();n*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*n/r.clientHeight,this.object.matrix),this._panUp(2*t*n/r.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/r.clientWidth,this.object.matrix),this._panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/r.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(e,t){if(!this.zoomToCursor)return;this._performCursorZoom=!0;let r=this.domElement.getBoundingClientRect(),i=e-r.left,n=t-r.top,a=r.width,s=r.height;this._mouse.x=i/a*2-1,this._mouse.y=-(n/s*2)+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}_handleMouseDownRotate(e){this._rotateStart.set(e.clientX,e.clientY)}_handleMouseDownDolly(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}_handleMouseDownPan(e){this._panStart.set(e.clientX,e.clientY)}_handleMouseMoveRotate(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);let t=this.domElement;this._rotateLeft(p*this._rotateDelta.x/t.clientHeight),this._rotateUp(p*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY<0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY>0&&this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}_handleKeyDown(e){let t=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this._rotateUp(p*this.rotateSpeed/this.domElement.clientHeight):this._pan(0,this.keyPanSpeed),t=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this._rotateUp(-p*this.rotateSpeed/this.domElement.clientHeight):this._pan(0,-this.keyPanSpeed),t=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this._rotateLeft(p*this.rotateSpeed/this.domElement.clientHeight):this._pan(this.keyPanSpeed,0),t=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this._rotateLeft(-p*this.rotateSpeed/this.domElement.clientHeight):this._pan(-this.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),this.update())}_handleTouchStartRotate(e){if(1===this._pointers.length)this._rotateStart.set(e.pageX,e.pageY);else{let t=this._getSecondPointerPosition(e),r=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);this._rotateStart.set(r,i)}}_handleTouchStartPan(e){if(1===this._pointers.length)this._panStart.set(e.pageX,e.pageY);else{let t=this._getSecondPointerPosition(e),r=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);this._panStart.set(r,i)}}_handleTouchStartDolly(e){let t=this._getSecondPointerPosition(e),r=e.pageX-t.x,i=e.pageY-t.y,n=Math.sqrt(r*r+i*i);this._dollyStart.set(0,n)}_handleTouchStartDollyPan(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enablePan&&this._handleTouchStartPan(e)}_handleTouchStartDollyRotate(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enableRotate&&this._handleTouchStartRotate(e)}_handleTouchMoveRotate(e){if(1==this._pointers.length)this._rotateEnd.set(e.pageX,e.pageY);else{let t=this._getSecondPointerPosition(e),r=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);this._rotateEnd.set(r,i)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);let t=this.domElement;this._rotateLeft(p*this._rotateDelta.x/t.clientHeight),this._rotateUp(p*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(e){if(1===this._pointers.length)this._panEnd.set(e.pageX,e.pageY);else{let t=this._getSecondPointerPosition(e),r=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);this._panEnd.set(r,i)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(e){let t=this._getSecondPointerPosition(e),r=e.pageX-t.x,i=e.pageY-t.y,n=Math.sqrt(r*r+i*i);this._dollyEnd.set(0,n),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);let a=(e.pageX+t.x)*.5,s=(e.pageY+t.y)*.5;this._updateZoomParameters(a,s)}_handleTouchMoveDollyPan(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enablePan&&this._handleTouchMovePan(e)}_handleTouchMoveDollyRotate(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enableRotate&&this._handleTouchMoveRotate(e)}_addPointer(e){this._pointers.push(e.pointerId)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId){this._pointers.splice(t,1);return}}_isTrackingPointer(e){for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId)return!0;return!1}_trackPointer(e){let t=this._pointerPositions[e.pointerId];void 0===t&&(t=new i.FM8,this._pointerPositions[e.pointerId]=t),t.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){let t=e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[t]}_customWheelEvent(e){let t=e.deltaMode,r={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(t){case 1:r.deltaY*=16;break;case 2:r.deltaY*=100}return e.ctrlKey&&!this._controlActive&&(r.deltaY*=10),r}}function f(e){!1!==this.enabled&&(0===this._pointers.length&&(this.domElement.setPointerCapture(e.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),this._isTrackingPointer(e)||(this._addPointer(e),"touch"===e.pointerType?this._onTouchStart(e):this._onMouseDown(e)))}function m(e){!1!==this.enabled&&("touch"===e.pointerType?this._onTouchMove(e):this._onMouseMove(e))}function g(e){switch(this._removePointer(e),this._pointers.length){case 0:this.domElement.releasePointerCapture(e.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(s),this.state=u.NONE;break;case 1:let t=this._pointers[0],r=this._pointerPositions[t];this._onTouchStart({pointerId:t,pageX:r.x,pageY:r.y})}}function y(e){let t;switch(e.button){case 0:t=this.mouseButtons.LEFT;break;case 1:t=this.mouseButtons.MIDDLE;break;case 2:t=this.mouseButtons.RIGHT;break;default:t=-1}switch(t){case i.RsA.DOLLY:if(!1===this.enableZoom)return;this._handleMouseDownDolly(e),this.state=u.DOLLY;break;case i.RsA.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===this.enablePan)return;this._handleMouseDownPan(e),this.state=u.PAN}else{if(!1===this.enableRotate)return;this._handleMouseDownRotate(e),this.state=u.ROTATE}break;case i.RsA.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===this.enableRotate)return;this._handleMouseDownRotate(e),this.state=u.ROTATE}else{if(!1===this.enablePan)return;this._handleMouseDownPan(e),this.state=u.PAN}break;default:this.state=u.NONE}this.state!==u.NONE&&this.dispatchEvent(a)}function v(e){switch(this.state){case u.ROTATE:if(!1===this.enableRotate)return;this._handleMouseMoveRotate(e);break;case u.DOLLY:if(!1===this.enableZoom)return;this._handleMouseMoveDolly(e);break;case u.PAN:if(!1===this.enablePan)return;this._handleMouseMovePan(e)}}function _(e){!1!==this.enabled&&!1!==this.enableZoom&&this.state===u.NONE&&(e.preventDefault(),this.dispatchEvent(a),this._handleMouseWheel(this._customWheelEvent(e)),this.dispatchEvent(s))}function w(e){!1!==this.enabled&&!1!==this.enablePan&&this._handleKeyDown(e)}function b(e){switch(this._trackPointer(e),this._pointers.length){case 1:switch(this.touches.ONE){case i.QmN.ROTATE:if(!1===this.enableRotate)return;this._handleTouchStartRotate(e),this.state=u.TOUCH_ROTATE;break;case i.QmN.PAN:if(!1===this.enablePan)return;this._handleTouchStartPan(e),this.state=u.TOUCH_PAN;break;default:this.state=u.NONE}break;case 2:switch(this.touches.TWO){case i.QmN.DOLLY_PAN:if(!1===this.enableZoom&&!1===this.enablePan)return;this._handleTouchStartDollyPan(e),this.state=u.TOUCH_DOLLY_PAN;break;case i.QmN.DOLLY_ROTATE:if(!1===this.enableZoom&&!1===this.enableRotate)return;this._handleTouchStartDollyRotate(e),this.state=u.TOUCH_DOLLY_ROTATE;break;default:this.state=u.NONE}break;default:this.state=u.NONE}this.state!==u.NONE&&this.dispatchEvent(a)}function x(e){switch(this._trackPointer(e),this.state){case u.TOUCH_ROTATE:if(!1===this.enableRotate)return;this._handleTouchMoveRotate(e),this.update();break;case u.TOUCH_PAN:if(!1===this.enablePan)return;this._handleTouchMovePan(e),this.update();break;case u.TOUCH_DOLLY_PAN:if(!1===this.enableZoom&&!1===this.enablePan)return;this._handleTouchMoveDollyPan(e),this.update();break;case u.TOUCH_DOLLY_ROTATE:if(!1===this.enableZoom&&!1===this.enableRotate)return;this._handleTouchMoveDollyRotate(e),this.update();break;default:this.state=u.NONE}}function P(e){!1!==this.enabled&&e.preventDefault()}function T(e){"Control"===e.key&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function M(e){"Control"===e.key&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}},8674:(e,t,r)=>{let i,n,a;r.d(t,{y:()=>ep});var s=r(7776),o={},l=function(e,t,r,i,n){var a=new Worker(o[t]||(o[t]=URL.createObjectURL(new Blob([e+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return a.onmessage=function(e){var t=e.data,r=t.$e$;if(r){var i=Error(r[0]);i.code=r[1],i.stack=r[2],n(i,null)}else n(null,t)},a.postMessage(r,i),a},h=Uint8Array,c=Uint16Array,p=Int32Array,u=new h([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),d=new h([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),f=new h([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),m=function(e,t){for(var r=new c(31),i=0;i<31;++i)r[i]=t+=1<<e[i-1];for(var n=new p(r[30]),i=1;i<30;++i)for(var a=r[i];a<r[i+1];++a)n[a]=a-r[i]<<5|i;return{b:r,r:n}},g=m(u,2),y=g.b,v=g.r;y[28]=258,v[258]=28;for(var _=m(d,0),w=_.b,b=_.r,x=new c(32768),P=0;P<32768;++P){var T=(43690&P)>>1|(21845&P)<<1;T=(61680&(T=(52428&T)>>2|(13107&T)<<2))>>4|(3855&T)<<4,x[P]=((65280&T)>>8|(255&T)<<8)>>1}for(var M=function(e,t,r){for(var i,n=e.length,a=0,s=new c(t);a<n;++a)e[a]&&++s[e[a]-1];var o=new c(t);for(a=1;a<t;++a)o[a]=o[a-1]+s[a-1]<<1;if(r){i=new c(1<<t);var l=15-t;for(a=0;a<n;++a)if(e[a])for(var h=a<<4|e[a],p=t-e[a],u=o[e[a]-1]++<<p,d=u|(1<<p)-1;u<=d;++u)i[x[u]>>l]=h}else for(a=0,i=new c(n);a<n;++a)e[a]&&(i[a]=x[o[e[a]-1]++]>>15-e[a]);return i},E=new h(288),P=0;P<144;++P)E[P]=8;for(var P=144;P<256;++P)E[P]=9;for(var P=256;P<280;++P)E[P]=7;for(var P=280;P<288;++P)E[P]=8;for(var I=new h(32),P=0;P<32;++P)I[P]=5;var O=M(E,9,1),D=M(I,5,1),S=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},A=function(e,t,r){var i=t/8|0;return(e[i]|e[i+1]<<8)>>(7&t)&r},k=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(7&t)},N=function(e){return(e+7)/8|0},C=function(e,t,r){return(null==t||t<0)&&(t=0),(null==r||r>e.length)&&(r=e.length),new h(e.subarray(t,r))},R=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],L=function(e,t,r){var i=Error(t||R[e]);if(i.code=e,Error.captureStackTrace&&Error.captureStackTrace(i,L),!r)throw i;return i},F=function(e,t,r,i){var n=e.length,a=i?i.length:0;if(!n||t.f&&!t.l)return r||new h(0);var s=!r,o=s||2!=t.i,l=t.i;s&&(r=new h(3*n));var c=function(e){var t=r.length;if(e>t){var i=new h(Math.max(2*t,e));i.set(r),r=i}},p=t.f||0,m=t.p||0,g=t.b||0,v=t.l,_=t.d,b=t.m,x=t.n,P=8*n;do{if(!v){p=A(e,m,1);var T=A(e,m+1,3);if(m+=3,T){if(1==T)v=O,_=D,b=9,x=5;else if(2==T){var E=A(e,m,31)+257,I=A(e,m+10,15)+4,R=E+A(e,m+5,31)+1;m+=14;for(var F=new h(R),j=new h(19),U=0;U<I;++U)j[f[U]]=A(e,m+3*U,7);m+=3*I;for(var z=S(j),B=(1<<z)-1,X=M(j,z,1),U=0;U<R;){var Y=X[A(e,m,B)];m+=15&Y;var V=Y>>4;if(V<16)F[U++]=V;else{var G=0,W=0;for(16==V?(W=3+A(e,m,3),m+=2,G=F[U-1]):17==V?(W=3+A(e,m,7),m+=3):18==V&&(W=11+A(e,m,127),m+=7);W--;)F[U++]=G}}var H=F.subarray(0,E),K=F.subarray(E);b=S(H),x=S(K),v=M(H,b,1),_=M(K,x,1)}else L(1)}else{var V=N(m)+4,Z=e[V-4]|e[V-3]<<8,$=V+Z;if($>n){l&&L(0);break}o&&c(g+Z),r.set(e.subarray(V,$),g),t.b=g+=Z,t.p=m=8*$,t.f=p;continue}if(m>P){l&&L(0);break}}o&&c(g+131072);for(var q=(1<<b)-1,Q=(1<<x)-1,J=m;;J=m){var G=v[k(e,m)&q],ee=G>>4;if((m+=15&G)>P){l&&L(0);break}if(G||L(2),ee<256)r[g++]=ee;else if(256==ee){J=m,v=null;break}else{var et=ee-254;if(ee>264){var U=ee-257,er=u[U];et=A(e,m,(1<<er)-1)+y[U],m+=er}var ei=_[k(e,m)&Q],en=ei>>4;ei||L(3),m+=15&ei;var K=w[en];if(en>3){var er=d[en];K+=k(e,m)&(1<<er)-1,m+=er}if(m>P){l&&L(0);break}o&&c(g+131072);var ea=g+et;if(g<K){var es=a-K,eo=Math.min(K,ea);for(es+g<0&&L(3);g<eo;++g)r[g]=i[es+g]}for(;g<ea;++g)r[g]=r[g-K]}}t.l=v,t.p=J,t.b=g,t.f=p,v&&(p=1,t.m=b,t.d=_,t.n=x)}while(!p);return g!=r.length&&s?C(r,0,g):r.subarray(0,g)},j=function(e,t,r){r<<=7&t;var i=t/8|0;e[i]|=r,e[i+1]|=r>>8},U=function(e,t,r){r<<=7&t;var i=t/8|0;e[i]|=r,e[i+1]|=r>>8,e[i+2]|=r>>16},z=function(e,t){for(var r=[],i=0;i<e.length;++i)e[i]&&r.push({s:i,f:e[i]});var n=r.length,a=r.slice();if(!n)return{t:H,l:0};if(1==n){var s=new h(r[0].s+1);return s[r[0].s]=1,{t:s,l:1}}r.sort(function(e,t){return e.f-t.f}),r.push({s:-1,f:25001});var o=r[0],l=r[1],p=0,u=1,d=2;for(r[0]={s:-1,f:o.f+l.f,l:o,r:l};u!=n-1;)o=r[r[p].f<r[d].f?p++:d++],l=r[p!=u&&r[p].f<r[d].f?p++:d++],r[u++]={s:-1,f:o.f+l.f,l:o,r:l};for(var f=a[0].s,i=1;i<n;++i)a[i].s>f&&(f=a[i].s);var m=new c(f+1),g=B(r[u-1],m,0);if(g>t){var i=0,y=0,v=g-t,_=1<<v;for(a.sort(function(e,t){return m[t.s]-m[e.s]||e.f-t.f});i<n;++i){var w=a[i].s;if(m[w]>t)y+=_-(1<<g-m[w]),m[w]=t;else break}for(y>>=v;y>0;){var b=a[i].s;m[b]<t?y-=1<<t-m[b]++-1:++i}for(;i>=0&&y;--i){var x=a[i].s;m[x]==t&&(--m[x],++y)}g=t}return{t:new h(m),l:g}},B=function(e,t,r){return -1==e.s?Math.max(B(e.l,t,r+1),B(e.r,t,r+1)):t[e.s]=r},X=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new c(++t),i=0,n=e[0],a=1,s=function(e){r[i++]=e},o=1;o<=t;++o)if(e[o]==n&&o!=t)++a;else{if(!n&&a>2){for(;a>138;a-=138)s(32754);a>2&&(s(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(s(n),--a;a>6;a-=6)s(8304);a>2&&(s(a-3<<5|8208),a=0)}for(;a--;)s(n);a=1,n=e[o]}return{c:r.subarray(0,i),n:t}},Y=function(e,t){for(var r=0,i=0;i<t.length;++i)r+=e[i]*t[i];return r},V=function(e,t,r){var i=r.length,n=N(t+2);e[n]=255&i,e[n+1]=i>>8,e[n+2]=255^e[n],e[n+3]=255^e[n+1];for(var a=0;a<i;++a)e[n+a+4]=r[a];return(n+4+i)*8},G=function(e,t,r,i,n,a,s,o,l,h,p){j(t,p++,r),++n[256];for(var m,g,y,v,_=z(n,15),w=_.t,b=_.l,x=z(a,15),P=x.t,T=x.l,O=X(w),D=O.c,S=O.n,A=X(P),k=A.c,N=A.n,C=new c(19),R=0;R<D.length;++R)++C[31&D[R]];for(var R=0;R<k.length;++R)++C[31&k[R]];for(var L=z(C,7),F=L.t,B=L.l,G=19;G>4&&!F[f[G-1]];--G);var W=h+5<<3,H=Y(n,E)+Y(a,I)+s,K=Y(n,w)+Y(a,P)+s+14+3*G+Y(C,F)+2*C[16]+3*C[17]+7*C[18];if(l>=0&&W<=H&&W<=K)return V(t,p,e.subarray(l,l+h));if(j(t,p,1+(K<H)),p+=2,K<H){m=M(w,b,0),g=w,y=M(P,T,0),v=P;var Z=M(F,B,0);j(t,p,S-257),j(t,p+5,N-1),j(t,p+10,G-4),p+=14;for(var R=0;R<G;++R)j(t,p+3*R,F[f[R]]);p+=3*G;for(var $=[D,k],q=0;q<2;++q)for(var Q=$[q],R=0;R<Q.length;++R){var J=31&Q[R];j(t,p,Z[J]),p+=F[J],J>15&&(j(t,p,Q[R]>>5&127),p+=Q[R]>>12)}}else m=null,g=E,y=null,v=I;for(var R=0;R<o;++R){var ee=i[R];if(ee>255){var J=ee>>18&31;U(t,p,m[J+257]),p+=g[J+257],J>7&&(j(t,p,ee>>23&31),p+=u[J]);var et=31&ee;U(t,p,y[et]),p+=v[et],et>3&&(U(t,p,ee>>5&8191),p+=d[et])}else U(t,p,m[ee]),p+=g[ee]}return U(t,p,m[256]),p+g[256]},W=new p([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),H=new h(0),K=function(e,t,r,i,n,a){var s=a.z||e.length,o=new h(i+s+5*(1+Math.ceil(s/7e3))+n),l=o.subarray(i,o.length-n),f=a.l,m=7&(a.r||0);if(t){m&&(l[0]=a.r>>3);for(var g=W[t-1],y=g>>13,_=8191&g,w=(1<<r)-1,x=a.p||new c(32768),P=a.h||new c(w+1),T=Math.ceil(r/3),M=2*T,E=function(t){return(e[t]^e[t+1]<<T^e[t+2]<<M)&w},I=new p(25e3),O=new c(288),D=new c(32),S=0,A=0,k=a.i||0,R=0,L=a.w||0,F=0;k+2<s;++k){var j=E(k),U=32767&k,z=P[j];if(x[U]=z,P[j]=U,L<=k){var B=s-k;if((S>7e3||R>24576)&&(B>423||!f)){m=G(e,l,0,I,O,D,A,R,F,k-F,m),R=S=A=0,F=k;for(var X=0;X<286;++X)O[X]=0;for(var X=0;X<30;++X)D[X]=0}var Y=2,H=0,K=_,Z=U-z&32767;if(B>2&&j==E(k-Z))for(var $=Math.min(y,B)-1,q=Math.min(32767,k),Q=Math.min(258,B);Z<=q&&--K&&U!=z;){if(e[k+Y]==e[k+Y-Z]){for(var J=0;J<Q&&e[k+J]==e[k+J-Z];++J);if(J>Y){if(Y=J,H=Z,J>$)break;for(var ee=Math.min(Z,J-2),et=0,X=0;X<ee;++X){var er=k-Z+X&32767,ei=x[er],en=er-ei&32767;en>et&&(et=en,z=er)}}}z=x[U=z],Z+=U-z&32767}if(H){I[R++]=0x10000000|v[Y]<<18|b[H];var ea=31&v[Y],es=31&b[H];A+=u[ea]+d[es],++O[257+ea],++D[es],L=k+Y,++S}else I[R++]=e[k],++O[e[k]]}}for(k=Math.max(k,L);k<s;++k)I[R++]=e[k],++O[e[k]];m=G(e,l,f,I,O,D,A,R,F,k-F,m),f||(a.r=7&m|l[m/8|0]<<3,m-=7,a.h=P,a.p=x,a.i=k,a.w=L)}else{for(var k=a.w||0;k<s+f;k+=65535){var eo=k+65535;eo>=s&&(l[m/8|0]=f,eo=s),m=V(l,m+1,e.subarray(k,eo))}a.i=s}return C(o,0,i+N(m)+n)},Z=function(){var e=1,t=0;return{p:function(r){for(var i=e,n=t,a=0|r.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)n+=i+=r[s];i=(65535&i)+15*(i>>16),n=(65535&n)+15*(n>>16)}e=i,t=n},d:function(){return e%=65521,t%=65521,(255&e)<<24|(65280&e)<<8|(255&t)<<8|t>>8}}},$=function(e,t,r,i,n){if(!n&&(n={l:1},t.dictionary)){var a=t.dictionary.subarray(-32768),s=new h(a.length+e.length);s.set(a),s.set(e,a.length),e=s,n.w=a.length}return K(e,null==t.level?6:t.level,null==t.mem?n.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):20:12+t.mem,r,i,n)},q=function(e,t){var r={};for(var i in e)r[i]=e[i];for(var i in t)r[i]=t[i];return r},Q=function(e,t,r){for(var i=e(),n=e.toString(),a=n.slice(n.indexOf("[")+1,n.lastIndexOf("]")).replace(/\s+/g,"").split(","),s=0;s<i.length;++s){var o=i[s],l=a[s];if("function"==typeof o){t+=";"+l+"=";var h=o.toString();if(o.prototype){if(-1!=h.indexOf("[native code]")){var c=h.indexOf(" ",8)+1;t+=h.slice(c,h.indexOf("(",c))}else for(var p in t+=h,o.prototype)t+=";"+l+".prototype."+p+"="+o.prototype[p].toString()}else t+=h}else r[l]=o}return t},J=function(e){var t=[];for(var r in e)e[r].buffer&&t.push((e[r]=new e[r].constructor(e[r])).buffer);return t},ee=function(e,t,r,i){if(!null[r]){for(var n="",a={},s=e.length-1,o=0;o<s;++o)n=Q(e[o],n,a);null[r]={c:Q(e[s],n,a),e:a}}var h=q({},null[r].e);return l(null[r].c+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+t.toString()+"}",r,h,J(h),i)},et=function(e){return postMessage(e,[e.buffer])},er=function(e){return e&&{out:e.size&&new h(e.size),dictionary:e.dictionary}},ei=function(e,t){return e[t]|e[t+1]<<8},en=function(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0},ea=function(e,t){return en(e,t)+0x100000000*en(e,t+4)},es=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8};function eo(e,t){return F(e,{i:2},t&&t.out,t&&t.dictionary)}var el="undefined"!=typeof TextDecoder&&new TextDecoder;try{el.decode(H,{stream:!0})}catch(e){}function eh(e,t,r){let i=r.length-e-1;if(t>=r[i])return i-1;if(t<=r[e])return e;let n=e,a=i,s=Math.floor((n+a)/2);for(;t<r[s]||t>=r[s+1];)t<r[s]?a=s:n=s,s=Math.floor((n+a)/2);return s}"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;class ec extends s.Hyl{constructor(e,t,r,i,n){super(),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=i||0,this.endKnot=n||this.knots.length-1;for(let e=0;e<r.length;++e){let t=r[e];this.controlPoints[e]=new s.Ltg(t.x,t.y,t.z,t.w)}}getPoint(e,t=new s.Pa4){let r=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),i=function(e,t,r,i){let n=eh(e,i,t),a=function(e,t,r,i){let n=[],a=[],s=[];n[0]=1;for(let o=1;o<=r;++o){a[o]=t-i[e+1-o],s[o]=i[e+o]-t;let r=0;for(let e=0;e<o;++e){let t=s[e+1],i=a[o-e],l=n[e]/(t+i);n[e]=r+t*l,r=i*l}n[o]=r}return n}(n,i,e,t),o=new s.Ltg(0,0,0,0);for(let t=0;t<=e;++t){let i=r[n-e+t],s=a[t],l=i.w*s;o.x+=i.x*l,o.y+=i.y*l,o.z+=i.z*l,o.w+=i.w*s}return o}(this.degree,this.knots,this.controlPoints,r);return 1!==i.w&&i.divideScalar(i.w),t.set(i.x,i.y,i.z)}getTangent(e,t=new s.Pa4){var r;let i=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),n=(r=this.degree,function(e){let t=e.length,r=[],i=[];for(let n=0;n<t;++n){let t=e[n];r[n]=new s.Pa4(t.x,t.y,t.z),i[n]=t.w}let n=[];for(let e=0;e<t;++e){let t=r[e].clone();for(let r=1;r<=e;++r)t.sub(n[e-r].clone().multiplyScalar(function(e,t){let r=1;for(let t=2;t<=e;++t)r*=t;let i=1;for(let e=2;e<=t;++e)i*=e;for(let r=2;r<=e-t;++r)i*=r;return r/i}(e,r)*i[r]));n[e]=t.divideScalar(i[0])}return n}(function(e,t,r,i,n){let a=1<e?1:e,o=[],l=eh(e,i,t),h=function(e,t,r,i,n){let a=[];for(let e=0;e<=r;++e)a[e]=0;let s=[];for(let e=0;e<=i;++e)s[e]=a.slice(0);let o=[];for(let e=0;e<=r;++e)o[e]=a.slice(0);o[0][0]=1;let l=a.slice(0),h=a.slice(0);for(let i=1;i<=r;++i){l[i]=t-n[e+1-i],h[i]=n[e+i]-t;let r=0;for(let e=0;e<i;++e){let t=h[e+1],n=l[i-e];o[i][e]=t+n;let a=o[e][i-1]/o[i][e];o[e][i]=r+t*a,r=n*a}o[i][i]=r}for(let e=0;e<=r;++e)s[0][e]=o[e][r];for(let e=0;e<=r;++e){let t=0,n=1,l=[];for(let e=0;e<=r;++e)l[e]=a.slice(0);l[0][0]=1;for(let a=1;a<=i;++a){let i=0,h=e-a,c=r-a;e>=a&&(l[n][0]=l[t][0]/o[c+1][h],i=l[n][0]*o[h][c]);let p=h>=-1?1:-h,u=e-1<=c?a-1:r-e;for(let e=p;e<=u;++e)l[n][e]=(l[t][e]-l[t][e-1])/o[c+1][h+e],i+=l[n][e]*o[h+e][c];e<=c&&(l[n][a]=-l[t][a-1]/o[c+1][e],i+=l[n][a]*o[e][c]),s[a][e]=i;let d=t;t=n,n=d}}let c=r;for(let e=1;e<=i;++e){for(let t=0;t<=r;++t)s[e][t]*=c;c*=r-e}return s}(l,i,e,a,t),c=[];for(let e=0;e<r.length;++e){let t=r[e].clone(),i=t.w;t.x*=i,t.y*=i,t.z*=i,c[e]=t}for(let t=0;t<=a;++t){let r=c[l-e].clone().multiplyScalar(h[t][0]);for(let i=1;i<=e;++i)r.add(c[l-e+i].clone().multiplyScalar(h[t][i]));o[t]=r}for(let e=a+1;e<=n+1;++e)o[e]=new s.Ltg(0,0,0);return o}(r,this.knots,this.controlPoints,i,1)));return t.copy(n[1]).normalize(),t}}class ep extends s.aNw{constructor(e){super(e)}load(e,t,r,i){let n=this,a=""===n.path?s.Zp0.extractUrlBase(e):n.path,o=new s.hH6(this.manager);o.setPath(n.path),o.setResponseType("arraybuffer"),o.setRequestHeader(n.requestHeader),o.setWithCredentials(n.withCredentials),o.load(e,function(r){try{t(n.parse(r,a))}catch(t){i?i(t):console.error(t),n.manager.itemError(e)}},r,i)}parse(e,t){if(function(e){let t="Kaydara FBX Binary  \0";return e.byteLength>=t.length&&t===eO(e,0,t.length)}(e))i=new eg().parse(e);else{let t=eO(e);if(!function(e){let t=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],r=0;for(let i=0;i<t.length;++i)if(function(t){let i=e[0];return e=e.slice(r+1),r++,i}(0)===t[i])return!1;return!0}(t))throw Error("THREE.FBXLoader: Unknown format.");if(7e3>e_(t))throw Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+e_(t));i=new em().parse(t)}return new eu(new s.dpR(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin),this.manager).parse(i)}}class eu{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){n=this.parseConnections();let e=this.parseImages(),t=this.parseTextures(e),r=this.parseMaterials(t),i=this.parseDeformers(),s=new ed().parse(i);return this.parseScene(i,s,r),a}parseConnections(){let e=new Map;return"Connections"in i&&i.Connections.connections.forEach(function(t){let r=t[0],i=t[1],n=t[2];e.has(r)||e.set(r,{parents:[],children:[]}),e.get(r).parents.push({ID:i,relationship:n}),e.has(i)||e.set(i,{parents:[],children:[]}),e.get(i).children.push({ID:r,relationship:n})}),e}parseImages(){let e={},t={};if("Video"in i.Objects){let r=i.Objects.Video;for(let i in r){let n=r[i];if(e[parseInt(i)]=n.RelativeFilename||n.Filename,"Content"in n){let e=n.Content instanceof ArrayBuffer&&n.Content.byteLength>0,a="string"==typeof n.Content&&""!==n.Content;if(e||a){let e=this.parseImage(r[i]);t[n.RelativeFilename||n.Filename]=e}}}}for(let r in e){let i=e[r];void 0!==t[i]?e[r]=t[i]:e[r]=e[r].split("\\").pop()}return e}parseImage(e){let t;let r=e.Content,i=e.RelativeFilename||e.Filename,n=i.slice(i.lastIndexOf(".")+1).toLowerCase();switch(n){case"bmp":t="image/bmp";break;case"jpg":case"jpeg":t="image/jpeg";break;case"png":t="image/png";break;case"tif":t="image/tiff";break;case"tga":null===this.manager.getHandler(".tga")&&console.warn("FBXLoader: TGA loader not found, skipping ",i),t="image/tga";break;default:console.warn('FBXLoader: Image type "'+n+'" is not supported.');return}if("string"==typeof r)return"data:"+t+";base64,"+r;{let e=new Uint8Array(r);return window.URL.createObjectURL(new Blob([e],{type:t}))}}parseTextures(e){let t=new Map;if("Texture"in i.Objects){let r=i.Objects.Texture;for(let i in r){let n=this.parseTexture(r[i],e);t.set(parseInt(i),n)}}return t}parseTexture(e,t){let r=this.loadTexture(e,t);r.ID=e.id,r.name=e.attrName;let i=e.WrapModeU,n=e.WrapModeV,a=void 0!==i?i.value:0,o=void 0!==n?n.value:0;if(r.wrapS=0===a?s.rpg:s.uWy,r.wrapT=0===o?s.rpg:s.uWy,"Scaling"in e){let t=e.Scaling.value;r.repeat.x=t[0],r.repeat.y=t[1]}if("Translation"in e){let t=e.Translation.value;r.offset.x=t[0],r.offset.y=t[1]}return r}loadTexture(e,t){let r;let i=new Set(["tga","tif","tiff","exr","dds","hdr","ktx2"]),a=e.FileName.split(".").pop().toLowerCase(),o=i.has(a)?this.manager.getHandler(`.${a}`):this.textureLoader;if(!o)return console.warn(`FBXLoader: ${a.toUpperCase()} loader not found, creating placeholder texture for`,e.RelativeFilename),new s.xEZ;let l=o.path;l||o.setPath(this.textureLoader.path);let h=n.get(e.id).children;void 0!==h&&h.length>0&&void 0!==t[h[0].ID]&&(0===(r=t[h[0].ID]).indexOf("blob:")||0===r.indexOf("data:"))&&o.setPath(void 0);let c=o.load(r);return o.setPath(l),c}parseMaterials(e){let t=new Map;if("Material"in i.Objects){let r=i.Objects.Material;for(let i in r){let n=this.parseMaterial(r[i],e);null!==n&&t.set(parseInt(i),n)}}return t}parseMaterial(e,t){let r;let i=e.id,a=e.attrName,o=e.ShadingModel;if("object"==typeof o&&(o=o.value),!n.has(i))return null;let l=this.parseParameters(e,t,i);switch(o.toLowerCase()){case"phong":r=new s.xoR;break;case"lambert":r=new s.YBo;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',o),r=new s.xoR}return r.setValues(l),r.name=a,r}parseParameters(e,t,r){let i={};e.BumpFactor&&(i.bumpScale=e.BumpFactor.value),e.Diffuse?i.color=s.epp.toWorkingColorSpace(new s.Ilk().fromArray(e.Diffuse.value),s.KI_):e.DiffuseColor&&("Color"===e.DiffuseColor.type||"ColorRGB"===e.DiffuseColor.type)&&(i.color=s.epp.toWorkingColorSpace(new s.Ilk().fromArray(e.DiffuseColor.value),s.KI_)),e.DisplacementFactor&&(i.displacementScale=e.DisplacementFactor.value),e.Emissive?i.emissive=s.epp.toWorkingColorSpace(new s.Ilk().fromArray(e.Emissive.value),s.KI_):e.EmissiveColor&&("Color"===e.EmissiveColor.type||"ColorRGB"===e.EmissiveColor.type)&&(i.emissive=s.epp.toWorkingColorSpace(new s.Ilk().fromArray(e.EmissiveColor.value),s.KI_)),e.EmissiveFactor&&(i.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(i.opacity=parseFloat(e.Opacity.value)),i.opacity<1&&(i.transparent=!0),e.ReflectionFactor&&(i.reflectivity=e.ReflectionFactor.value),e.Shininess&&(i.shininess=e.Shininess.value),e.Specular?i.specular=s.epp.toWorkingColorSpace(new s.Ilk().fromArray(e.Specular.value),s.KI_):e.SpecularColor&&"Color"===e.SpecularColor.type&&(i.specular=s.epp.toWorkingColorSpace(new s.Ilk().fromArray(e.SpecularColor.value),s.KI_));let a=this;return n.get(r).children.forEach(function(e){let r=e.relationship;switch(r){case"Bump":i.bumpMap=a.getTexture(t,e.ID);break;case"Maya|TEX_ao_map":i.aoMap=a.getTexture(t,e.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":i.map=a.getTexture(t,e.ID),void 0!==i.map&&(i.map.colorSpace=s.KI_);break;case"DisplacementColor":i.displacementMap=a.getTexture(t,e.ID);break;case"EmissiveColor":i.emissiveMap=a.getTexture(t,e.ID),void 0!==i.emissiveMap&&(i.emissiveMap.colorSpace=s.KI_);break;case"NormalMap":case"Maya|TEX_normal_map":i.normalMap=a.getTexture(t,e.ID);break;case"ReflectionColor":i.envMap=a.getTexture(t,e.ID),void 0!==i.envMap&&(i.envMap.mapping=s.dSO,i.envMap.colorSpace=s.KI_);break;case"SpecularColor":i.specularMap=a.getTexture(t,e.ID),void 0!==i.specularMap&&(i.specularMap.colorSpace=s.KI_);break;case"TransparentColor":case"TransparencyFactor":i.alphaMap=a.getTexture(t,e.ID),i.transparent=!0;break;default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",r)}}),i}getTexture(e,t){return"LayeredTexture"in i.Objects&&t in i.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=n.get(t).children[0].ID),e.get(t)}parseDeformers(){let e={},t={};if("Deformer"in i.Objects){let r=i.Objects.Deformer;for(let i in r){let a=r[i],s=n.get(parseInt(i));if("Skin"===a.attrType){let t=this.parseSkeleton(s,r);t.ID=i,s.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),t.geometryID=s.parents[0].ID,e[i]=t}else if("BlendShape"===a.attrType){let e={id:i};e.rawTargets=this.parseMorphTargets(s,r),e.id=i,s.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[i]=e}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){let r=[];return e.children.forEach(function(e){let i=t[e.ID];if("Cluster"!==i.attrType)return;let n={ID:e.ID,indices:[],weights:[],transformLink:new s.yGw().fromArray(i.TransformLink.a)};"Indexes"in i&&(n.indices=i.Indexes.a,n.weights=i.Weights.a),r.push(n)}),{rawBones:r,bones:[]}}parseMorphTargets(e,t){let r=[];for(let i=0;i<e.children.length;i++){let a=e.children[i],s=t[a.ID],o={name:s.attrName,initialWeight:s.DeformPercent,id:s.id,fullWeights:s.FullWeights.a};if("BlendShapeChannel"!==s.attrType)return;o.geoID=n.get(parseInt(a.ID)).children.filter(function(e){return void 0===e.relationship})[0].ID,r.push(o)}return r}parseScene(e,t,r){a=new s.ZAu;let o=this.parseModels(e.skeletons,t,r),l=i.Objects.Model,h=this;o.forEach(function(e){let t=l[e.ID];h.setLookAtProperties(e,t),n.get(e.ID).parents.forEach(function(t){let r=o.get(t.ID);void 0!==r&&r.add(e)}),null===e.parent&&a.add(e)}),this.bindSkeleton(e.skeletons,t,o),this.addGlobalSceneSettings(),a.traverse(function(e){if(e.userData.transformData){e.parent&&(e.userData.transformData.parentMatrix=e.parent.matrix,e.userData.transformData.parentMatrixWorld=e.parent.matrixWorld);let t=eM(e.userData.transformData);e.applyMatrix4(t),e.updateWorldMatrix()}});let c=new ef().parse();1===a.children.length&&a.children[0].isGroup&&(a.children[0].animations=c,a=a.children[0]),a.animations=c}parseModels(e,t,r){let a=new Map,o=i.Objects.Model;for(let i in o){let l=parseInt(i),h=o[i],c=n.get(l),p=this.buildSkeleton(c,e,l,h.attrName);if(!p){switch(h.attrType){case"Camera":p=this.createCamera(c);break;case"Light":p=this.createLight(c);break;case"Mesh":p=this.createMesh(c,t,r);break;case"NurbsCurve":p=this.createCurve(c,t);break;case"LimbNode":case"Root":p=new s.N$j;break;default:p=new s.ZAu}p.name=h.attrName?s.iUV.sanitizeNodeName(h.attrName):"",p.userData.originalName=h.attrName,p.ID=l}this.getTransformData(p,h),a.set(l,p)}return a}buildSkeleton(e,t,r,i){let n=null;return e.parents.forEach(function(e){for(let a in t){let o=t[a];o.rawBones.forEach(function(t,a){if(t.ID===e.ID){let e=n;(n=new s.N$j).matrixWorld.copy(t.transformLink),n.name=i?s.iUV.sanitizeNodeName(i):"",n.userData.originalName=i,n.ID=r,o.bones[a]=n,null!==e&&n.add(e)}})}}),n}createCamera(e){let t,r;if(e.children.forEach(function(e){let t=i.Objects.NodeAttribute[e.ID];void 0!==t&&(r=t)}),void 0===r)t=new s.Tme;else{let e=0;void 0!==r.CameraProjectionType&&1===r.CameraProjectionType.value&&(e=1);let i=1;void 0!==r.NearPlane&&(i=r.NearPlane.value/1e3);let n=1e3;void 0!==r.FarPlane&&(n=r.FarPlane.value/1e3);let a=window.innerWidth,o=window.innerHeight;void 0!==r.AspectWidth&&void 0!==r.AspectHeight&&(a=r.AspectWidth.value,o=r.AspectHeight.value);let l=a/o,h=45;void 0!==r.FieldOfView&&(h=r.FieldOfView.value);let c=r.FocalLength?r.FocalLength.value:null;switch(e){case 0:t=new s.cPb(h,l,i,n),null!==c&&t.setFocalLength(c);break;case 1:console.warn("THREE.FBXLoader: Orthographic cameras not supported yet."),t=new s.Tme;break;default:console.warn("THREE.FBXLoader: Unknown camera type "+e+"."),t=new s.Tme}}return t}createLight(e){let t,r;if(e.children.forEach(function(e){let t=i.Objects.NodeAttribute[e.ID];void 0!==t&&(r=t)}),void 0===r)t=new s.Tme;else{let e;e=void 0===r.LightType?0:r.LightType.value;let i=0xffffff;void 0!==r.Color&&(i=s.epp.toWorkingColorSpace(new s.Ilk().fromArray(r.Color.value),s.KI_));let n=void 0===r.Intensity?1:r.Intensity.value/100;void 0!==r.CastLightOnObject&&0===r.CastLightOnObject.value&&(n=0);let a=0;switch(void 0!==r.FarAttenuationEnd&&(a=void 0!==r.EnableFarAttenuation&&0===r.EnableFarAttenuation.value?0:r.FarAttenuationEnd.value),e){case 0:t=new s.cek(i,n,a,1);break;case 1:t=new s.Ox3(i,n);break;case 2:let o=Math.PI/3;void 0!==r.InnerAngle&&(o=s.M8C.degToRad(r.InnerAngle.value));let l=0;void 0!==r.OuterAngle&&(l=Math.max(l=s.M8C.degToRad(r.OuterAngle.value),1)),t=new s.PMe(i,n,a,o,l,1);break;default:console.warn("THREE.FBXLoader: Unknown light type "+r.LightType.value+", defaulting to a PointLight."),t=new s.cek(i,n)}void 0!==r.CastShadows&&1===r.CastShadows.value&&(t.castShadow=!0)}return t}createMesh(e,t,r){let i;let n=null,a=null,o=[];return e.children.forEach(function(e){t.has(e.ID)&&(n=t.get(e.ID)),r.has(e.ID)&&o.push(r.get(e.ID))}),o.length>1?a=o:o.length>0?a=o[0]:(a=new s.xoR({name:s.aNw.DEFAULT_MATERIAL_NAME,color:0xcccccc}),o.push(a)),"color"in n.attributes&&o.forEach(function(e){e.vertexColors=!0}),n.FBX_Deformer?(i=new s.TUv(n,a)).normalizeSkinWeights():i=new s.Kj0(n,a),i}createCurve(e,t){let r=e.children.reduce(function(e,r){return t.has(r.ID)&&(e=t.get(r.ID)),e},null),i=new s.nls({name:s.aNw.DEFAULT_MATERIAL_NAME,color:3342591,linewidth:1});return new s.x12(r,i)}getTransformData(e,t){let r={};"InheritType"in t&&(r.inheritType=parseInt(t.InheritType.value)),"RotationOrder"in t?r.eulerOrder=eE(t.RotationOrder.value):r.eulerOrder=eE(0),"Lcl_Translation"in t&&(r.translation=t.Lcl_Translation.value),"PreRotation"in t&&(r.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(r.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(r.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(r.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(r.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(r.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(r.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(r.rotationPivot=t.RotationPivot.value),e.userData.transformData=r}setLookAtProperties(e,t){"LookAtProperty"in t&&n.get(e.ID).children.forEach(function(t){if("LookAtProperty"===t.relationship){let r=i.Objects.Model[t.ID];if("Lcl_Translation"in r){let t=r.Lcl_Translation.value;void 0!==e.target?(e.target.position.fromArray(t),a.add(e.target)):e.lookAt(new s.Pa4().fromArray(t))}}})}bindSkeleton(e,t,r){let i=this.parsePoseNodes();for(let a in e){let o=e[a];n.get(parseInt(o.ID)).parents.forEach(function(e){if(t.has(e.ID)){let t=e.ID;n.get(t).parents.forEach(function(e){r.has(e.ID)&&r.get(e.ID).bind(new s.OdW(o.bones),i[e.ID])})}})}}parsePoseNodes(){let e={};if("Pose"in i.Objects){let t=i.Objects.Pose;for(let r in t)if("BindPose"===t[r].attrType&&t[r].NbPoseNodes>0){let i=t[r].PoseNode;Array.isArray(i)?i.forEach(function(t){e[t.Node]=new s.yGw().fromArray(t.Matrix.a)}):e[i.Node]=new s.yGw().fromArray(i.Matrix.a)}}return e}addGlobalSceneSettings(){if("GlobalSettings"in i){if("AmbientColor"in i.GlobalSettings){let e=i.GlobalSettings.AmbientColor.value,t=e[0],r=e[1],n=e[2];if(0!==t||0!==r||0!==n){let e=new s.Ilk().setRGB(t,r,n,s.KI_);a.add(new s.Mig(e,1))}}"UnitScaleFactor"in i.GlobalSettings&&(a.userData.unitScaleFactor=i.GlobalSettings.UnitScaleFactor.value)}}}class ed{constructor(){this.negativeMaterialIndices=!1}parse(e){let t=new Map;if("Geometry"in i.Objects){let r=i.Objects.Geometry;for(let i in r){let a=n.get(parseInt(i)),s=this.parseGeometry(a,r[i],e);t.set(parseInt(i),s)}}return!0===this.negativeMaterialIndices&&console.warn("THREE.FBXLoader: The FBX file contains invalid (negative) material indices. The asset might not render as expected."),t}parseGeometry(e,t,r){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,r);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,r){let n=r.skeletons,a=[],s=e.parents.map(function(e){return i.Objects.Model[e.ID]});if(0===s.length)return;let o=e.children.reduce(function(e,t){return void 0!==n[t.ID]&&(e=n[t.ID]),e},null);e.children.forEach(function(e){void 0!==r.morphTargets[e.ID]&&a.push(r.morphTargets[e.ID])});let l=s[0],h={};"RotationOrder"in l&&(h.eulerOrder=eE(l.RotationOrder.value)),"InheritType"in l&&(h.inheritType=parseInt(l.InheritType.value)),"GeometricTranslation"in l&&(h.translation=l.GeometricTranslation.value),"GeometricRotation"in l&&(h.rotation=l.GeometricRotation.value),"GeometricScaling"in l&&(h.scale=l.GeometricScaling.value);let c=eM(h);return this.genGeometry(t,o,a,c)}genGeometry(e,t,r,i){let n=new s.u9r;e.attrName&&(n.name=e.attrName);let a=this.parseGeoNode(e,t),o=this.genBuffers(a),l=new s.a$l(o.vertex,3);if(l.applyMatrix4(i),n.setAttribute("position",l),o.colors.length>0&&n.setAttribute("color",new s.a$l(o.colors,3)),t&&(n.setAttribute("skinIndex",new s.qlB(o.weightsIndices,4)),n.setAttribute("skinWeight",new s.a$l(o.vertexWeights,4)),n.FBX_Deformer=t),o.normal.length>0){let e=new s.Vkp().getNormalMatrix(i),t=new s.a$l(o.normal,3);t.applyNormalMatrix(e),n.setAttribute("normal",t)}if(o.uvs.forEach(function(e,t){let r=0===t?"uv":`uv${t}`;n.setAttribute(r,new s.a$l(o.uvs[t],2))}),a.material&&"AllSame"!==a.material.mappingType){let e=o.materialIndex[0],t=0;if(o.materialIndex.forEach(function(r,i){r!==e&&(n.addGroup(t,i-t,e),e=r,t=i)}),n.groups.length>0){let t=n.groups[n.groups.length-1],r=t.start+t.count;r!==o.materialIndex.length&&n.addGroup(r,o.materialIndex.length-r,e)}0===n.groups.length&&n.addGroup(0,o.materialIndex.length,o.materialIndex[0])}return this.addMorphTargets(n,e,r,i),n}parseGeoNode(e,t){let r={};if(r.vertexPositions=void 0!==e.Vertices?e.Vertices.a:[],r.vertexIndices=void 0!==e.PolygonVertexIndex?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(r.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(r.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(r.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){r.uv=[];let t=0;for(;e.LayerElementUV[t];)e.LayerElementUV[t].UV&&r.uv.push(this.parseUVs(e.LayerElementUV[t])),t++}return r.weightTable={},null!==t&&(r.skeleton=t,t.rawBones.forEach(function(e,t){e.indices.forEach(function(i,n){void 0===r.weightTable[i]&&(r.weightTable[i]=[]),r.weightTable[i].push({id:t,weight:e.weights[n]})})})),r}genBuffers(e){let t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},r=0,i=0,n=!1,a=[],s=[],o=[],l=[],h=[],c=[],p=this;return e.vertexIndices.forEach(function(u,d){let f;let m=!1;u<0&&(u^=-1,m=!0);let g=[],y=[];if(a.push(3*u,3*u+1,3*u+2),e.color){let t=ex(d,r,u,e.color);o.push(t[0],t[1],t[2])}if(e.skeleton){if(void 0!==e.weightTable[u]&&e.weightTable[u].forEach(function(e){y.push(e.weight),g.push(e.id)}),y.length>4){n||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),n=!0);let e=[0,0,0,0],t=[0,0,0,0];y.forEach(function(r,i){let n=r,a=g[i];t.forEach(function(t,r,i){if(n>t){i[r]=n,n=t;let s=e[r];e[r]=a,a=s}})}),g=e,y=t}for(;y.length<4;)y.push(0),g.push(0);for(let e=0;e<4;++e)h.push(y[e]),c.push(g[e])}if(e.normal){let t=ex(d,r,u,e.normal);s.push(t[0],t[1],t[2])}e.material&&"AllSame"!==e.material.mappingType&&(f=ex(d,r,u,e.material)[0])<0&&(p.negativeMaterialIndices=!0,f=0),e.uv&&e.uv.forEach(function(e,t){let i=ex(d,r,u,e);void 0===l[t]&&(l[t]=[]),l[t].push(i[0]),l[t].push(i[1])}),i++,m&&(p.genFace(t,e,a,f,s,o,l,h,c,i),r++,i=0,a=[],s=[],o=[],l=[],h=[],c=[])}),t}getNormalNewell(e){let t=new s.Pa4(0,0,0);for(let r=0;r<e.length;r++){let i=e[r],n=e[(r+1)%e.length];t.x+=(i.y-n.y)*(i.z+n.z),t.y+=(i.z-n.z)*(i.x+n.x),t.z+=(i.x-n.x)*(i.y+n.y)}return t.normalize(),t}getNormalTangentAndBitangent(e){let t=this.getNormalNewell(e),r=(Math.abs(t.z)>.5?new s.Pa4(0,1,0):new s.Pa4(0,0,1)).cross(t).normalize(),i=t.clone().cross(r).normalize();return{normal:t,tangent:r,bitangent:i}}flattenVertex(e,t,r){return new s.FM8(e.dot(t),e.dot(r))}genFace(e,t,r,i,n,a,o,l,h,c){let p;if(c>3){let e=[],i=t.baseVertexPositions||t.vertexPositions;for(let t=0;t<r.length;t+=3)e.push(new s.Pa4(i[r[t]],i[r[t+1]],i[r[t+2]]));let{tangent:n,bitangent:a}=this.getNormalTangentAndBitangent(e),o=[];for(let t of e)o.push(this.flattenVertex(t,n,a));p=s.iDF.triangulateShape(o,[])}else p=[[0,1,2]];for(let[s,c,u]of p)e.vertex.push(t.vertexPositions[r[3*s]]),e.vertex.push(t.vertexPositions[r[3*s+1]]),e.vertex.push(t.vertexPositions[r[3*s+2]]),e.vertex.push(t.vertexPositions[r[3*c]]),e.vertex.push(t.vertexPositions[r[3*c+1]]),e.vertex.push(t.vertexPositions[r[3*c+2]]),e.vertex.push(t.vertexPositions[r[3*u]]),e.vertex.push(t.vertexPositions[r[3*u+1]]),e.vertex.push(t.vertexPositions[r[3*u+2]]),t.skeleton&&(e.vertexWeights.push(l[4*s]),e.vertexWeights.push(l[4*s+1]),e.vertexWeights.push(l[4*s+2]),e.vertexWeights.push(l[4*s+3]),e.vertexWeights.push(l[4*c]),e.vertexWeights.push(l[4*c+1]),e.vertexWeights.push(l[4*c+2]),e.vertexWeights.push(l[4*c+3]),e.vertexWeights.push(l[4*u]),e.vertexWeights.push(l[4*u+1]),e.vertexWeights.push(l[4*u+2]),e.vertexWeights.push(l[4*u+3]),e.weightsIndices.push(h[4*s]),e.weightsIndices.push(h[4*s+1]),e.weightsIndices.push(h[4*s+2]),e.weightsIndices.push(h[4*s+3]),e.weightsIndices.push(h[4*c]),e.weightsIndices.push(h[4*c+1]),e.weightsIndices.push(h[4*c+2]),e.weightsIndices.push(h[4*c+3]),e.weightsIndices.push(h[4*u]),e.weightsIndices.push(h[4*u+1]),e.weightsIndices.push(h[4*u+2]),e.weightsIndices.push(h[4*u+3])),t.color&&(e.colors.push(a[3*s]),e.colors.push(a[3*s+1]),e.colors.push(a[3*s+2]),e.colors.push(a[3*c]),e.colors.push(a[3*c+1]),e.colors.push(a[3*c+2]),e.colors.push(a[3*u]),e.colors.push(a[3*u+1]),e.colors.push(a[3*u+2])),t.material&&"AllSame"!==t.material.mappingType&&(e.materialIndex.push(i),e.materialIndex.push(i),e.materialIndex.push(i)),t.normal&&(e.normal.push(n[3*s]),e.normal.push(n[3*s+1]),e.normal.push(n[3*s+2]),e.normal.push(n[3*c]),e.normal.push(n[3*c+1]),e.normal.push(n[3*c+2]),e.normal.push(n[3*u]),e.normal.push(n[3*u+1]),e.normal.push(n[3*u+2])),t.uv&&t.uv.forEach(function(t,r){void 0===e.uvs[r]&&(e.uvs[r]=[]),e.uvs[r].push(o[r][2*s]),e.uvs[r].push(o[r][2*s+1]),e.uvs[r].push(o[r][2*c]),e.uvs[r].push(o[r][2*c+1]),e.uvs[r].push(o[r][2*u]),e.uvs[r].push(o[r][2*u+1])})}addMorphTargets(e,t,r,n){if(0===r.length)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];let a=this;r.forEach(function(r){r.rawTargets.forEach(function(r){let s=i.Objects.Geometry[r.geoID];void 0!==s&&a.genMorphGeometry(e,t,s,n,r.name)})})}genMorphGeometry(e,t,r,i,n){let a=void 0!==t.Vertices?t.Vertices.a:[],o=void 0!==t.PolygonVertexIndex?t.PolygonVertexIndex.a:[],l=void 0!==r.Vertices?r.Vertices.a:[],h=void 0!==r.Indexes?r.Indexes.a:[],c=new Float32Array(3*e.attributes.position.count);for(let e=0;e<h.length;e++){let t=3*h[e];c[t]=l[3*e],c[t+1]=l[3*e+1],c[t+2]=l[3*e+2]}let p=this.genBuffers({vertexIndices:o,vertexPositions:c,baseVertexPositions:a}),u=new s.a$l(p.vertex,3);u.name=n||r.attrName,u.applyMatrix4(i),e.morphAttributes.position.push(u)}parseNormals(e){let t=e.MappingInformationType,r=e.ReferenceInformationType,i=e.Normals.a,n=[];return"IndexToDirect"===r&&("NormalIndex"in e?n=e.NormalIndex.a:"NormalsIndex"in e&&(n=e.NormalsIndex.a)),{dataSize:3,buffer:i,indices:n,mappingType:t,referenceType:r}}parseUVs(e){let t=e.MappingInformationType,r=e.ReferenceInformationType,i=e.UV.a,n=[];return"IndexToDirect"===r&&(n=e.UVIndex.a),{dataSize:2,buffer:i,indices:n,mappingType:t,referenceType:r}}parseVertexColors(e){let t=e.MappingInformationType,r=e.ReferenceInformationType,i=e.Colors.a,n=[];"IndexToDirect"===r&&(n=e.ColorIndex.a);for(let e=0,t=new s.Ilk;e<i.length;e+=4)t.fromArray(i,e),s.epp.toWorkingColorSpace(t,s.KI_),t.toArray(i,e);return{dataSize:4,buffer:i,indices:n,mappingType:t,referenceType:r}}parseMaterialIndices(e){let t=e.MappingInformationType,r=e.ReferenceInformationType;if("NoMappingInformation"===t)return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:r};let i=e.Materials.a,n=[];for(let e=0;e<i.length;++e)n.push(e);return{dataSize:1,buffer:i,indices:n,mappingType:t,referenceType:r}}parseNurbsGeometry(e){let t,r;let i=parseInt(e.Order);if(isNaN(i))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new s.u9r;let n=i-1,a=e.KnotVector.a,o=[],l=e.Points.a;for(let e=0,t=l.length;e<t;e+=4)o.push(new s.Ltg().fromArray(l,e));if("Closed"===e.Form)o.push(o[0]);else if("Periodic"===e.Form){t=n,r=a.length-1-t;for(let e=0;e<n;++e)o.push(o[e])}let h=new ec(n,a,o,t,r).getPoints(12*o.length);return new s.u9r().setFromPoints(h)}}class ef{parse(){let e=[],t=this.parseClips();if(void 0!==t)for(let r in t){let i=t[r],n=this.addClip(i);e.push(n)}return e}parseClips(){if(void 0===i.Objects.AnimationCurve)return;let e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);let t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){let e=i.Objects.AnimationCurveNode,t=new Map;for(let r in e){let i=e[r];if(null!==i.attrName.match(/S|R|T|DeformPercent/)){let e={id:i.id,attr:i.attrName,curves:{}};t.set(e.id,e)}}return t}parseAnimationCurves(e){let t=i.Objects.AnimationCurve;for(let r in t){let i={id:t[r].id,times:t[r].KeyTime.a.map(ew),values:t[r].KeyValueFloat.a},a=n.get(i.id);if(void 0!==a){let t=a.parents[0].ID,r=a.parents[0].relationship;r.match(/X/)?e.get(t).curves.x=i:r.match(/Y/)?e.get(t).curves.y=i:r.match(/Z/)?e.get(t).curves.z=i:r.match(/DeformPercent/)&&e.has(t)&&(e.get(t).curves.morph=i)}}}parseAnimationLayers(e){let t=i.Objects.AnimationLayer,r=new Map;for(let o in t){let t=[],l=n.get(parseInt(o));void 0!==l&&(l.children.forEach(function(r,o){if(e.has(r.ID)){let l=e.get(r.ID);if(void 0!==l.curves.x||void 0!==l.curves.y||void 0!==l.curves.z){if(void 0===t[o]){let e=n.get(r.ID).parents.filter(function(e){return void 0!==e.relationship})[0].ID;if(void 0!==e){let n=i.Objects.Model[e.toString()];if(void 0===n){console.warn("THREE.FBXLoader: Encountered a unused curve.",r);return}let l={modelName:n.attrName?s.iUV.sanitizeNodeName(n.attrName):"",ID:n.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};a.traverse(function(e){e.ID===n.id&&(l.transform=e.matrix,e.userData.transformData&&(l.eulerOrder=e.userData.transformData.eulerOrder))}),l.transform||(l.transform=new s.yGw),"PreRotation"in n&&(l.preRotation=n.PreRotation.value),"PostRotation"in n&&(l.postRotation=n.PostRotation.value),t[o]=l}}t[o]&&(t[o][l.attr]=l)}else if(void 0!==l.curves.morph){if(void 0===t[o]){let e=n.get(r.ID).parents.filter(function(e){return void 0!==e.relationship})[0].ID,a=n.get(e).parents[0].ID,l=n.get(a).parents[0].ID,h=n.get(l).parents[0].ID,c=i.Objects.Model[h],p={modelName:c.attrName?s.iUV.sanitizeNodeName(c.attrName):"",morphName:i.Objects.Deformer[e].attrName};t[o]=p}t[o][l.attr]=l}}}),r.set(parseInt(o),t))}return r}parseAnimStacks(e){let t=i.Objects.AnimationStack,r={};for(let i in t){let a=n.get(parseInt(i)).children;a.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");let s=e.get(a[0].ID);r[i]={name:t[i].attrName,layer:s}}return r}addClip(e){let t=[],r=this;return e.layer.forEach(function(e){t=t.concat(r.generateTracks(e))}),new s.m7l(e.name,-1,t)}generateTracks(e){let t=[],r=new s.Pa4,i=new s.Pa4;if(e.transform&&e.transform.decompose(r,new s._fP,i),r=r.toArray(),i=i.toArray(),void 0!==e.T&&Object.keys(e.T.curves).length>0){let i=this.generateVectorTrack(e.modelName,e.T.curves,r,"position");void 0!==i&&t.push(i)}if(void 0!==e.R&&Object.keys(e.R.curves).length>0){let r=this.generateRotationTrack(e.modelName,e.R.curves,e.preRotation,e.postRotation,e.eulerOrder);void 0!==r&&t.push(r)}if(void 0!==e.S&&Object.keys(e.S.curves).length>0){let r=this.generateVectorTrack(e.modelName,e.S.curves,i,"scale");void 0!==r&&t.push(r)}if(void 0!==e.DeformPercent){let r=this.generateMorphTrack(e);void 0!==r&&t.push(r)}return t}generateVectorTrack(e,t,r,i){let n=this.getTimesForAllAxes(t),a=this.getKeyframeTrackValues(n,t,r);return new s.yC1(e+"."+i,n,a)}generateRotationTrack(e,t,r,i,n){let a,o;if(void 0!==t.x&&void 0!==t.y&&void 0!==t.z){let e=this.interpolateRotations(t.x,t.y,t.z,n);a=e[0],o=e[1]}let l=eE(0);void 0!==r&&((r=r.map(s.M8C.degToRad)).push(l),r=new s.USm().fromArray(r),r=new s._fP().setFromEuler(r)),void 0!==i&&((i=i.map(s.M8C.degToRad)).push(l),i=new s.USm().fromArray(i),i=new s._fP().setFromEuler(i).invert());let h=new s._fP,c=new s.USm,p=[];if(!o||!a)return new s.iLg(e+".quaternion",[0],[0]);for(let e=0;e<o.length;e+=3)c.set(o[e],o[e+1],o[e+2],n),h.setFromEuler(c),void 0!==r&&h.premultiply(r),void 0!==i&&h.multiply(i),e>2&&0>new s._fP().fromArray(p,(e-3)/3*4).dot(h)&&h.set(-h.x,-h.y,-h.z,-h.w),h.toArray(p,e/3*4);return new s.iLg(e+".quaternion",a,p)}generateMorphTrack(e){let t=e.DeformPercent.curves.morph,r=t.values.map(function(e){return e/100}),i=a.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new s.dUE(e.modelName+".morphTargetInfluences["+i+"]",t.times,r)}getTimesForAllAxes(e){let t=[];if(void 0!==e.x&&(t=t.concat(e.x.times)),void 0!==e.y&&(t=t.concat(e.y.times)),void 0!==e.z&&(t=t.concat(e.z.times)),(t=t.sort(function(e,t){return e-t})).length>1){let e=1,r=t[0];for(let i=1;i<t.length;i++){let n=t[i];n!==r&&(t[e]=n,r=n,e++)}t=t.slice(0,e)}return t}getKeyframeTrackValues(e,t,r){let i=[],n=-1,a=-1,s=-1;return e.forEach(function(e){if(t.x&&(n=t.x.times.indexOf(e)),t.y&&(a=t.y.times.indexOf(e)),t.z&&(s=t.z.times.indexOf(e)),-1!==n){let e=t.x.values[n];i.push(e),r[0]=e}else i.push(r[0]);if(-1!==a){let e=t.y.values[a];i.push(e),r[1]=e}else i.push(r[1]);if(-1!==s){let e=t.z.values[s];i.push(e),r[2]=e}else i.push(r[2])}),i}interpolateRotations(e,t,r,i){let n=[],a=[];n.push(e.times[0]),a.push(s.M8C.degToRad(e.values[0])),a.push(s.M8C.degToRad(t.values[0])),a.push(s.M8C.degToRad(r.values[0]));for(let o=1;o<e.values.length;o++){let l=[e.values[o-1],t.values[o-1],r.values[o-1]];if(isNaN(l[0])||isNaN(l[1])||isNaN(l[2]))continue;let h=l.map(s.M8C.degToRad),c=[e.values[o],t.values[o],r.values[o]];if(isNaN(c[0])||isNaN(c[1])||isNaN(c[2]))continue;let p=c.map(s.M8C.degToRad),u=[c[0]-l[0],c[1]-l[1],c[2]-l[2]],d=[Math.abs(u[0]),Math.abs(u[1]),Math.abs(u[2])];if(d[0]>=180||d[1]>=180||d[2]>=180){let t=Math.max(...d)/180,r=new s.USm(...h,i),l=new s.USm(...p,i),c=new s._fP().setFromEuler(r),u=new s._fP().setFromEuler(l);c.dot(u)&&u.set(-u.x,-u.y,-u.z,-u.w);let f=e.times[o-1],m=e.times[o]-f,g=new s._fP,y=new s.USm;for(let e=0;e<1;e+=1/t)g.copy(c.clone().slerp(u.clone(),e)),n.push(f+e*m),y.setFromQuaternion(g,i),a.push(y.x),a.push(y.y),a.push(y.z)}else n.push(e.times[o]),a.push(s.M8C.degToRad(e.values[o])),a.push(s.M8C.degToRad(t.values[o])),a.push(s.M8C.degToRad(r.values[o]))}return[n,a]}}class em{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new ev,this.nodeStack=[],this.currentProp=[],this.currentPropName="";let t=this,r=e.split(/[\r\n]+/);return r.forEach(function(e,i){let n=e.match(/^[\s\t]*;/),a=e.match(/^[\s\t]*$/);if(n||a)return;let s=e.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),o=e.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),l=e.match("^\\t{"+(t.currentIndent-1)+"}}");s?t.parseNodeBegin(e,s):o?t.parseNodeProperty(e,o,r[++i]):l?t.popStack():e.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(e)}),this.allNodes}parseNodeBegin(e,t){let r=t[1].trim().replace(/^"/,"").replace(/"$/,""),i=t[2].split(",").map(function(e){return e.trim().replace(/^"/,"").replace(/"$/,"")}),n={name:r},a=this.parseNodeAttr(i),s=this.getCurrentNode();0===this.currentIndent?this.allNodes.add(r,n):r in s?("PoseNode"===r?s.PoseNode.push(n):void 0!==s[r].id&&(s[r]={},s[r][s[r].id]=s[r]),""!==a.id&&(s[r][a.id]=n)):"number"==typeof a.id?(s[r]={},s[r][a.id]=n):"Properties70"!==r&&("PoseNode"===r?s[r]=[n]:s[r]=n),"number"==typeof a.id&&(n.id=a.id),""!==a.name&&(n.attrName=a.name),""!==a.type&&(n.attrType=a.type),this.pushStack(n)}parseNodeAttr(e){let t=e[0];""!==e[0]&&isNaN(t=parseInt(e[0]))&&(t=e[0]);let r="",i="";return e.length>1&&(r=e[1].replace(/^(\w+)::/,""),i=e[2]),{id:t,name:r,type:i}}parseNodeProperty(e,t,r){let i=t[1].replace(/^"/,"").replace(/"$/,"").trim(),n=t[2].replace(/^"/,"").replace(/"$/,"").trim();"Content"===i&&","===n&&(n=r.replace(/"/g,"").replace(/,$/,"").trim());let a=this.getCurrentNode();if("Properties70"===a.name){this.parseNodeSpecialProperty(e,i,n);return}if("C"===i){let e=n.split(",").slice(1),t=parseInt(e[0]),r=parseInt(e[1]),s=n.split(",").slice(3);s=s.map(function(e){return e.trim().replace(/^"/,"")}),i="connections",function(e,t){for(let r=0,i=e.length,n=t.length;r<n;r++,i++)e[i]=t[r]}(n=[t,r],s),void 0===a[i]&&(a[i]=[])}"Node"===i&&(a.id=n),i in a&&Array.isArray(a[i])?a[i].push(n):"a"!==i?a[i]=n:a.a=n,this.setCurrentProp(a,i),"a"===i&&","!==n.slice(-1)&&(a.a=eI(n))}parseNodePropertyContinued(e){let t=this.getCurrentNode();t.a+=e,","!==e.slice(-1)&&(t.a=eI(t.a))}parseNodeSpecialProperty(e,t,r){let i=r.split('",').map(function(e){return e.trim().replace(/^\"/,"").replace(/\s/,"_")}),n=i[0],a=i[1],s=i[2],o=i[3],l=i[4];switch(a){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":l=parseFloat(l);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":l=eI(l)}this.getPrevNode()[n]={type:a,type2:s,flag:o,value:l},this.setCurrentProp(this.getPrevNode(),n)}}class eg{parse(e){let t=new ey(e);t.skip(23);let r=t.getUint32();if(r<6400)throw Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+r);let i=new ev;for(;!this.endOfContent(t);){let e=this.parseNode(t,r);null!==e&&i.add(e.name,e)}return i}endOfContent(e){return e.size()%16==0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){let r={},i=t>=7500?e.getUint64():e.getUint32(),n=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();let a=e.getUint8(),s=e.getString(a);if(0===i)return null;let o=[];for(let t=0;t<n;t++)o.push(this.parseProperty(e));let l=o.length>0?o[0]:"",h=o.length>1?o[1]:"",c=o.length>2?o[2]:"";for(r.singleProperty=1===n&&e.getOffset()===i;i>e.getOffset();){let i=this.parseNode(e,t);null!==i&&this.parseSubNode(s,r,i)}return r.propertyList=o,"number"==typeof l&&(r.id=l),""!==h&&(r.attrName=h),""!==c&&(r.attrType=c),""!==s&&(r.name=s),r}parseSubNode(e,t,r){if(!0===r.singleProperty){let e=r.propertyList[0];Array.isArray(e)?(t[r.name]=r,r.a=e):t[r.name]=e}else if("Connections"===e&&"C"===r.name){let e=[];r.propertyList.forEach(function(t,r){0!==r&&e.push(t)}),void 0===t.connections&&(t.connections=[]),t.connections.push(e)}else if("Properties70"===r.name)Object.keys(r).forEach(function(e){t[e]=r[e]});else if("Properties70"===e&&"P"===r.name){let e,i=r.propertyList[0],n=r.propertyList[1],a=r.propertyList[2],s=r.propertyList[3];0===i.indexOf("Lcl ")&&(i=i.replace("Lcl ","Lcl_")),0===n.indexOf("Lcl ")&&(n=n.replace("Lcl ","Lcl_")),e="Color"===n||"ColorRGB"===n||"Vector"===n||"Vector3D"===n||0===n.indexOf("Lcl_")?[r.propertyList[4],r.propertyList[5],r.propertyList[6]]:r.propertyList[4],t[i]={type:n,type2:a,flag:s,value:e}}else void 0===t[r.name]?"number"==typeof r.id?(t[r.name]={},t[r.name][r.id]=r):t[r.name]=r:"PoseNode"===r.name?(Array.isArray(t[r.name])||(t[r.name]=[t[r.name]]),t[r.name].push(r)):void 0===t[r.name][r.id]&&(t[r.name][r.id]=r)}parseProperty(e){let t;let r=e.getString(1);switch(r){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return t=e.getUint32(),e.getArrayBuffer(t);case"S":return t=e.getUint32(),e.getString(t);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":var i,n,a,s;let o=e.getUint32(),l=e.getUint32(),h=e.getUint32();if(0===l)switch(r){case"b":case"c":return e.getBooleanArray(o);case"d":return e.getFloat64Array(o);case"f":return e.getFloat32Array(o);case"i":return e.getInt32Array(o);case"l":return e.getInt64Array(o)}let c=new ey(F((i=new Uint8Array(e.getArrayBuffer(h))).subarray((s=void 0,((15&(a=i)[0])!=8||a[0]>>4>7||(a[0]<<8|a[1])%31)&&L(6,"invalid zlib data"),(a[1]>>5&1)==+!s&&L(6,"invalid zlib data: "+(32&a[1]?"need":"unexpected")+" dictionary"),(a[1]>>3&4)+2),-4),{i:2},n&&n.out,n&&n.dictionary).buffer);switch(r){case"b":case"c":return c.getBooleanArray(o);case"d":return c.getFloat64Array(o);case"f":return c.getFloat32Array(o);case"i":return c.getInt32Array(o);case"l":return c.getInt64Array(o)}break;default:throw Error("THREE.FBXLoader: Unknown property type "+r)}}}class ey{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=void 0===t||t,this._textDecoder=new TextDecoder}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(1&this.getUint8())==1}getBooleanArray(e){let t=[];for(let r=0;r<e;r++)t.push(this.getBoolean());return t}getUint8(){let e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){let e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){let e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){let t=[];for(let r=0;r<e;r++)t.push(this.getInt32());return t}getUint32(){let e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return(this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),0x80000000&t)?(t=0xffffffff&~t,0xffffffff==(e=0xffffffff&~e)&&(t=t+1&0xffffffff),-(0x100000000*t+(e=e+1&0xffffffff))):0x100000000*t+e}getInt64Array(e){let t=[];for(let r=0;r<e;r++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),0x100000000*t+e}getFloat32(){let e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){let t=[];for(let r=0;r<e;r++)t.push(this.getFloat32());return t}getFloat64(){let e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){let t=[];for(let r=0;r<e;r++)t.push(this.getFloat64());return t}getArrayBuffer(e){let t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){let t=this.offset,r=new Uint8Array(this.dv.buffer,t,e);this.skip(e);let i=r.indexOf(0);return i>=0&&(r=new Uint8Array(this.dv.buffer,t,i)),this._textDecoder.decode(r)}}class ev{add(e,t){this[e]=t}}function e_(e){let t=e.match(/FBXVersion: (\d+)/);if(t)return parseInt(t[1]);throw Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function ew(e){return e/46186158e3}let eb=[];function ex(e,t,r,i){let n;switch(i.mappingType){case"ByPolygonVertex":n=e;break;case"ByPolygon":n=t;break;case"ByVertice":n=r;break;case"AllSame":n=i.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+i.mappingType)}"IndexToDirect"===i.referenceType&&(n=i.indices[n]);let a=n*i.dataSize,s=a+i.dataSize;return function(e,t,r,i){for(let n=r,a=0;n<i;n++,a++)e[a]=t[n];return e}(eb,i.buffer,a,s)}let eP=new s.USm,eT=new s.Pa4;function eM(e){let t=new s.yGw,r=new s.yGw,i=new s.yGw,n=new s.yGw,a=new s.yGw,o=new s.yGw,l=new s.yGw,h=new s.yGw,c=new s.yGw,p=new s.yGw,u=new s.yGw,d=new s.yGw,f=e.inheritType?e.inheritType:0;e.translation&&t.setPosition(eT.fromArray(e.translation));let m=eE(0);if(e.preRotation){let t=e.preRotation.map(s.M8C.degToRad);t.push(m),r.makeRotationFromEuler(eP.fromArray(t))}if(e.rotation){let t=e.rotation.map(s.M8C.degToRad);t.push(e.eulerOrder||m),i.makeRotationFromEuler(eP.fromArray(t))}if(e.postRotation){let t=e.postRotation.map(s.M8C.degToRad);t.push(m),n.makeRotationFromEuler(eP.fromArray(t)),n.invert()}e.scale&&a.scale(eT.fromArray(e.scale)),e.scalingOffset&&l.setPosition(eT.fromArray(e.scalingOffset)),e.scalingPivot&&o.setPosition(eT.fromArray(e.scalingPivot)),e.rotationOffset&&h.setPosition(eT.fromArray(e.rotationOffset)),e.rotationPivot&&c.setPosition(eT.fromArray(e.rotationPivot)),e.parentMatrixWorld&&(u.copy(e.parentMatrix),p.copy(e.parentMatrixWorld));let g=r.clone().multiply(i).multiply(n),y=new s.yGw;y.extractRotation(p);let v=new s.yGw;v.copyPosition(p);let _=v.clone().invert().multiply(p),w=y.clone().invert().multiply(_),b=new s.yGw;if(0===f)b.copy(y).multiply(g).multiply(w).multiply(a);else if(1===f)b.copy(y).multiply(w).multiply(g).multiply(a);else{let e=new s.yGw().scale(new s.Pa4().setFromMatrixScale(u)).clone().invert(),t=w.clone().multiply(e);b.copy(y).multiply(g).multiply(t).multiply(a)}let x=c.clone().invert(),P=o.clone().invert(),T=t.clone().multiply(h).multiply(c).multiply(r).multiply(i).multiply(n).multiply(x).multiply(l).multiply(o).multiply(a).multiply(P),M=new s.yGw().copyPosition(T),E=p.clone().multiply(M);return d.copyPosition(E),(T=d.clone().multiply(b)).premultiply(p.invert()),T}function eE(e){return 6===(e=e||0)?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),"ZYX"):["ZYX","YZX","XZY","ZXY","YXZ","XYZ"][e]}function eI(e){return e.split(",").map(function(e){return parseFloat(e)})}function eO(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=e.byteLength),new TextDecoder().decode(new Uint8Array(e,t,r))}}}]);