(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{8895:(e,t,o)=>{Promise.resolve().then(o.bind(o,3256))},3256:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>i});var a=o(7437),s=o(2265),l=o(7138);o(3487);var r=o(6463),n=o(2303);function i(){let e=(0,r.useRouter)(),{login:t}=(0,n.a)(),[o,i]=(0,s.useState)(""),[c,u]=(0,s.useState)(""),[g,d]=(0,s.useState)(null),h=async a=>{a.preventDefault(),d(null);try{let a=await fetch("".concat("http://localhost:3001","/auth/signin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o,password:c})});if(!a.ok){let e=await a.text();d(e||"Login failed");return}let s=await a.json();console.log("Login success",s);let l={id:s.userid,email:s.email};t(l,s.accesstoken),e.push("/")}catch(e){console.error("Error logging in",e),d("An error occurred while logging in.")}},m=e=>{alert("Login with ".concat(e," clicked!"))};return(0,a.jsxs)("div",{className:"login-container",children:[(0,a.jsxs)("div",{className:"login-form",children:[(0,a.jsx)("h2",{children:"Signin"}),(0,a.jsxs)("form",{onSubmit:h,className:"form-container",children:[(0,a.jsx)("input",{type:"text",placeholder:"Email",value:o,onChange:e=>i(e.target.value),className:"form-input",required:!0}),(0,a.jsx)("input",{type:"password",placeholder:"Password",value:c,onChange:e=>u(e.target.value),className:"form-input",required:!0}),(0,a.jsx)(l.default,{href:"/forgot-password",className:"forgot-password-link",children:"Forgot Password?"}),(0,a.jsx)("button",{type:"submit",className:"signin-button",children:"Signin"})]}),g&&(0,a.jsx)("p",{className:"error-message",children:g}),(0,a.jsx)("p",{children:"or signin with"}),(0,a.jsx)("div",{className:"social-buttons",children:(0,a.jsxs)("button",{className:"google-button","aria-label":"Sign in with Google",onClick:()=>m("Google"),children:[(0,a.jsx)("img",{src:"https://developers.google.com/identity/images/g-logo.png",alt:"Google Logo",className:"google-icon"}),"Sign in with Google"]})})]}),(0,a.jsxs)("div",{className:"login-welcome",children:[(0,a.jsx)("h2",{children:"Welcome back!"}),(0,a.jsx)("p",{children:"Welcome back! We are so happy to have you here. It's great to see you again. We hope you had a safe and enjoyable time away."}),(0,a.jsx)(l.default,{href:"/register",className:"signup-link",children:"No account yet? Signup."})]})]})}},2303:(e,t,o)=>{"use strict";o.d(t,{AuthProvider:()=>r,a:()=>n});var a=o(7437),s=o(2265);let l=(0,s.createContext)();function r(e){let{children:t}=e,[o,r]=(0,s.useState)(null),[n,i]=(0,s.useState)(null);return(0,s.useEffect)(()=>{let e=localStorage.getItem("accesstoken"),t=localStorage.getItem("user");if(e&&"undefined"!==e&&i(e),t&&"undefined"!==t)try{r(JSON.parse(t))}catch(e){console.error("Error parsing stored user data:",e),localStorage.removeItem("user")}},[]),(0,a.jsx)(l.Provider,{value:{user:o,accesstoken:n,login:(e,t)=>{r(e),i(t),localStorage.setItem("user",JSON.stringify(e)),localStorage.setItem("accesstoken",t)},logout:()=>{r(null),i(null),localStorage.removeItem("user"),localStorage.removeItem("accesstoken")}},children:t})}let n=()=>(0,s.useContext)(l)},3487:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[21,291,130,215,744],()=>t(8895)),_N_E=e.O()}]);